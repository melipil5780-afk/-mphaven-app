<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0f172a">
<title>Module 2: Physical Reset ‚Äî Body to Brain</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
    --bg-dark: #0f172a;
    --bg-card: rgba(15, 23, 42, 0.98);
    --bg-card-light: rgba(30, 41, 59, 0.65);
    --bg-card-dark: rgba(15, 23, 42, 0.45);
    --border-subtle: rgba(30, 41, 59, 0.5);
    --border-softer: rgba(51, 65, 85, 0.4);
    --primary-teal: #0e7490;
    --primary-teal-dark: #0c627a;
    --accent-amber: #d97706;
    --accent-amber-dark: #b45309;
    --text-primary: rgb(241, 245, 249);
    --text-secondary: rgb(203, 213, 225);
    --text-muted: rgb(148, 163, 184);
    --text-teal-light: rgb(165, 243, 252);
    --text-teal: rgb(94, 234, 212);
    --text-amber: rgb(251, 191, 36);
    --success-emerald: rgb(74, 222, 128);
    --success-bg: rgba(34, 197, 94, 0.12);
    --gradient-main: linear-gradient(135deg, #0e7490, #d97706);
    --gradient-subtle: linear-gradient(135deg, rgba(14,116,144,0.15), rgba(217,119,6,0.10));
    --crisis-red: #dc2626;
    --crisis-red-dark: #b91c1c;
    --crisis-bg: rgba(220, 38, 38, 0.08);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-smoothing: antialiased;
}

html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: var(--bg-dark);
    color: var(--text-primary);
}

.container {
    width: 100%;
    height: 100vh;
    height: -webkit-fill-available;
    display: flex;
    flex-direction: column;
}

.app-wrapper {
    width: 100%;
    max-width: 28rem;
    height: 100%;
    margin: 0 auto;
    background: var(--bg-card);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.bg-blur-1, .bg-blur-2 {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;
    opacity: 0.3;
}

.bg-blur-1 {
    top: -5%;
    left: 50%;
    transform: translateX(-50%);
    width: 22rem;
    height: 22rem;
    background: rgba(14, 116, 144, 0.15);
}

.bg-blur-2 {
    bottom: -5%;
    right: -5%;
    width: 18rem;
    height: 18rem;
    background: rgba(217, 119, 6, 0.15);
}

.main-content {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    position: relative;
    z-index: 1;
}

.main-content::-webkit-scrollbar {
    display: none;
}

.content-wrapper {
    padding: 1.25rem;
    padding-bottom: calc(2rem + env(safe-area-inset-bottom));
    min-height: 100%;
    display: flex;
    flex-direction: column;
}

/* Crisis Banner */
.crisis-banner {
    background: var(--crisis-bg);
    border: 1px solid var(--crisis-red);
    border-radius: 0.875rem;
    padding: 1rem 1.25rem;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.crisis-banner__text {
    color: #fca5a5;
    font-size: 0.875rem;
    font-weight: 600;
    flex: 1;
    min-width: 180px;
}

.crisis-banner__actions {
    display: flex;
    gap: 0.625rem;
}

.crisis-banner__link {
    color: white;
    background: var(--crisis-red);
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 2rem;
    font-size: 0.8125rem;
    font-weight: 700;
    transition: all 0.2s;
}

.crisis-banner__link:active {
    background: #b91c1c;
    transform: scale(0.97);
}

/* Header */
.header {
    background: linear-gradient(135deg, var(--bg-card-light), var(--bg-card-dark));
    border: 1px solid var(--border-softer);
    border-radius: 1rem;
    padding: 1.25rem;
    margin-bottom: 1.25rem;
}

.header__top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.back-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    line-height: 1;
    transition: all 0.2s;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
}

.back-btn:active {
    transform: scale(0.9);
}

.step-indicator {
    color: var(--text-muted);
    font-size: 0.875rem;
    font-weight: 600;
}

.progress-dots {
    display: flex;
    gap: 0.375rem;
    margin-bottom: 1rem;
}

.progress-dot {
    flex: 1;
    height: 0.5rem;
    background: rgba(148, 163, 184, 0.2);
    border-radius: 1rem;
    transition: all 0.3s;
}

.progress-dot.active {
    background: var(--gradient-main);
}

.step-title {
    font-size: 1.5rem;
    font-weight: 700;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
    line-height: 1.3;
}

.step-subtitle {
    color: var(--text-secondary);
    font-size: 0.9375rem;
}

/* Card */
.card {
    background: linear-gradient(135deg, var(--bg-card-light), var(--bg-card-dark));
    border: 1px solid var(--border-softer);
    border-radius: 1.25rem;
    padding: 1.75rem 1.5rem;
    margin-bottom: 1.25rem;
}

.card--highlight {
    background: var(--gradient-subtle);
    border: 1px solid rgba(14, 116, 144, 0.3);
}

.card__icon {
    font-size: 3rem;
    text-align: center;
    margin-bottom: 1rem;
    line-height: 1;
}

.card__title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1.25rem;
    line-height: 1.3;
    display: flex;
    align-items: center;
    gap: 0.625rem;
}

.card__content {
    color: var(--text-secondary);
    line-height: 1.7;
    font-size: 1rem;
}

.card__content p {
    margin-bottom: 1.25rem;
}

.card__content p:last-child {
    margin-bottom: 0;
}

.card__content strong {
    color: var(--text-teal);
    font-weight: 600;
}

/* Section Header */
.section-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-softer);
}

.section-icon {
    font-size: 1.75rem;
}

.section-title-text {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-teal-light);
}

/* Stats */
.technique-stats {
    display: flex;
    gap: 1rem;
    margin: 1rem 0;
    padding: 1rem;
    background: rgba(15,23,42,0.6);
    border-radius: 0.75rem;
}

.stat {
    flex: 1;
    text-align: center;
}

.stat-label {
    color: var(--text-muted);
    font-size: 0.6875rem;
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

.stat-value {
    color: var(--text-teal);
    font-weight: 700;
    font-size: 1rem;
    margin-top: 0.25rem;
}

/* Instruction Box */
.instruction-box {
    background: rgba(15,23,42,0.6);
    border-left: 4px solid var(--primary-teal);
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1.25rem 0;
}

.instruction-list {
    list-style: none;
    counter-reset: step-counter;
}

.instruction-list li {
    counter-increment: step-counter;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    color: var(--text-secondary);
    font-size: 0.875rem;
    line-height: 1.6;
}

.instruction-list li:before {
    content: counter(step-counter);
    background: var(--gradient-subtle);
    color: var(--text-teal-light);
    font-weight: 700;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    flex-shrink: 0;
}

/* Safety Note */
.safety-note {
    background: rgba(220,38,38,0.1);
    border-left: 4px solid var(--crisis-red);
    padding: 1rem;
    border-radius: 0.75rem;
    margin: 1rem 0;
    font-size: 0.8125rem;
    color: #fca5a5;
    line-height: 1.6;
}

/* Practice Card */
.practice-card {
    background: var(--gradient-subtle);
    border: 2px solid rgba(14,116,144,0.3);
    border-radius: 1rem;
    padding: 1.5rem;
    margin: 1.25rem 0;
}

.practice-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-teal-light);
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 1rem;
}

.practice-buttons {
    display: flex;
    gap: 0.75rem;
    margin: 1.25rem 0;
}

.btn-practice {
    flex: 1;
    padding: 0.875rem;
    border-radius: 0.75rem;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
}

.btn-practice-primary {
    background: var(--gradient-main);
    color: white;
}

.btn-practice-primary:active {
    transform: scale(0.98);
    opacity: 0.9;
}

.btn-practice-secondary {
    background: var(--bg-card-dark);
    color: var(--text-secondary);
    border: 1px solid var(--border-softer);
}

.btn-practice-secondary:active {
    background: rgba(30, 41, 59, 0.8);
    transform: scale(0.98);
}

/* Timer */
.timer-container {
    text-align: center;
    padding: 1.5rem;
    background: rgba(15,23,42,0.8);
    border-radius: 1rem;
    margin: 1rem 0;
}

.timer-display {
    font-size: 3rem;
    font-weight: 800;
    color: var(--text-teal);
    font-variant-numeric: tabular-nums;
    margin-bottom: 1rem;
}

/* Checkboxes */
.reflection-checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem;
    background: rgba(15,23,42,0.6);
    border: 1px solid var(--border-softer);
    border-radius: 0.75rem;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 0.875rem;
    transition: all 0.2s;
}

.reflection-checkbox.checked {
    border-color: var(--primary-teal);
    background: rgba(14,116,144,0.15);
    color: var(--text-primary);
}

.reflection-checkbox input[type="checkbox"] {
    width: 1.125rem;
    height: 1.125rem;
    accent-color: var(--primary-teal);
}

.reflection-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    margin: 1.25rem 0;
}

/* Reference Card */
.reference-card {
    background: var(--gradient-subtle);
    border: 1px solid rgba(14,116,144,0.3);
    border-radius: 1rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
}

.reference-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-teal-light);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.reference-grid {
    display: grid;
    gap: 0.75rem;
}

.reference-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem;
    background: rgba(15,23,42,0.6);
    border-radius: 0.75rem;
}

.reference-icon {
    font-size: 1.25rem;
}

.reference-content {
    flex: 1;
}

.reference-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.875rem;
    margin-bottom: 0.125rem;
}

.reference-use {
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Buttons */
.btn {
    width: 100%;
    padding: 1.125rem 1.5rem;
    border-radius: 1rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.625rem;
    text-decoration: none;
}

.btn--primary {
    background: var(--gradient-main);
    color: white;
}

.btn--primary:active {
    transform: scale(0.98);
    opacity: 0.9;
}

.btn--secondary {
    background: rgba(30, 41, 59, 0.6);
    color: var(--text-secondary);
    border: 1px solid var(--border-softer);
}

.btn--secondary:active {
    background: rgba(30, 41, 59, 0.8);
    transform: scale(0.98);
}

.btn--save {
    background: var(--gradient-subtle);
    color: var(--text-teal-light);
    border: 1px solid rgba(14, 116, 144, 0.3);
    padding: 0.875rem 1.5rem;
    border-radius: 2rem;
    font-weight: 600;
    font-size: 0.875rem;
}

.btn--save:active {
    background: rgba(14, 116, 144, 0.2);
}

.btn--save.saved {
    background: var(--success-bg);
    color: var(--success-emerald);
    border-color: rgba(74, 222, 128, 0.3);
}

.btn-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1.5rem;
}

.save-feedback {
    color: var(--success-emerald);
    font-size: 0.875rem;
    text-align: center;
    margin-top: 0.875rem;
    display: none;
}

.save-feedback.show {
    display: block;
    animation: slideDown 0.3s ease-out;
}

/* Practice Button */
.practice-section {
    text-align: center;
    margin: 1.25rem 0;
}

.practice-btn {
    background: var(--success-bg);
    color: var(--success-emerald);
    border: 1px solid rgba(74, 222, 128, 0.3);
    padding: 0.875rem 2rem;
    border-radius: 2rem;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.625rem;
}

.practice-btn:active {
    background: rgba(34, 197, 94, 0.2);
    transform: scale(0.97);
}

.practice-btn.marked {
    background: rgba(34, 197, 94, 0.25);
}

/* Footer */
.footer {
    margin-top: auto;
    padding-top: 2rem;
    border-top: 1px solid var(--border-subtle);
    text-align: center;
}

.footer__warning {
    color: #fca5a5;
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: 1rem;
}

.footer__resources {
    color: var(--text-muted);
    font-size: 0.8125rem;
    line-height: 1.8;
}

.footer__resources p {
    margin-bottom: 0.5rem;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.step-content {
    animation: fadeIn 0.3s ease-out;
}

/* Mobile Adjustments */
@media (max-width: 640px) {
    .reflection-grid {
        grid-template-columns: 1fr;
    }
    
    .btn-group {
        grid-template-columns: 1fr;
    }
    
    .practice-buttons {
        flex-direction: column;
    }
}

/* iOS Safe Area */
@supports (-webkit-touch-callout: none) {
    .container {
        height: -webkit-fill-available;
    }
}
</style>
</head>
<body>
<div class="container">
    <div class="app-wrapper">
        <div class="bg-blur-1"></div>
        <div class="bg-blur-2"></div>
        <div class="main-content">
            <div class="content-wrapper">

                <!-- CRISIS BANNER -->
                <div class="crisis-banner">
                    <span class="crisis-banner__text">üö® In crisis? Help is available 24/7</span>
                    <div class="crisis-banner__actions">
                        <a href="tel:988" class="crisis-banner__link">Call 988</a>
                        <a href="sms:988" class="crisis-banner__link">Text 988</a>
                    </div>
                </div>

                <!-- HEADER -->
                <div class="header">
                    <div class="header__top">
                        <a href="crisis-intro.html" class="back-btn">‚Üê</a>
                        <span class="step-indicator">Module 2 of 5</span>
                    </div>
                    <div class="progress-dots">
                        <div class="progress-dot"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                    <h1 class="step-title">Physical Reset ‚Äî Body to Brain</h1>
                    <p class="step-subtitle">18 minutes ‚Ä¢ Emergency tools that work when your thinking brain is offline</p>
                </div>

                <!-- INTRODUCTION -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üîÑ</span>
                        <span class="section-title-text">Introduction</span>
                    </div>
                    <div class="card__content">
                        <p style="font-size: 1.05rem; color: var(--text-teal-light); font-style: italic;">
                            "Your body has hardwired responses that can override your emotional state. These aren't distractions ‚Äî they're biological circuit breakers. When your alarm system is screaming, you need to speak its language: physical sensation."
                        </p>
                    </div>
                </div>

                <!-- COLD WATER -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üßä</span>
                        <span class="section-title-text">Cold Water ‚Äî The Dive Reflex</span>
                    </div>
                    
                    <div class="card__content">
                        <p>
                            "When cold water hits your face, especially around your eyes and nose, it triggers the <strong>mammalian dive reflex</strong> ‚Äî the same response that lets seals dive deep. Your heart rate automatically slows. This isn't willpower; it's a hardwired reflex that's been around for millions of years."
                        </p>
                    </div>
                    
                    <div class="technique-stats">
                        <div class="stat">
                            <div class="stat-label">Speed</div>
                            <div class="stat-value">‚ö° 30-60 sec</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Best for</div>
                            <div class="stat-value">üéØ Hyperarousal</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Intensity</div>
                            <div class="stat-value">üí™ High</div>
                        </div>
                    </div>
                    
                    <div class="instruction-box">
                        <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.75rem;">How To Do It:</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 1rem 0 0.5rem;">Method 1: Ice Water Face Dunk</p>
                        <ul class="instruction-list" style="margin-bottom: 1rem;">
                            <li>Fill bowl with ice water</li>
                            <li>Hold breath</li>
                            <li>Dunk face for 15-30 seconds</li>
                            <li>Come up, breathe normally</li>
                            <li>Repeat 2-3 times if needed</li>
                        </ul>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 1rem 0 0.5rem;">Method 2: Ice Pack on Face</p>
                        <ul class="instruction-list" style="margin-bottom: 1rem;">
                            <li>Wrap ice pack in thin towel</li>
                            <li>Hold on eyes and cheeks for 30 seconds</li>
                            <li>Breathe slowly</li>
                            <li>Repeat as needed</li>
                        </ul>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 1rem 0 0.5rem;">Method 3: Cold Shower</p>
                        <ul class="instruction-list">
                            <li>Turn water to cold</li>
                            <li>Let it hit face and chest</li>
                            <li>Stay for 1-2 minutes</li>
                        </ul>
                    </div>
                    
                    <div class="safety-note">
                        <strong>‚ö†Ô∏è Safety Notes:</strong> Don't do this if you have heart conditions. Don't hold breath for more than 30 seconds. If you feel dizzy, stop.
                    </div>
                    
                    <div class="practice-card" id="coldWaterPractice">
                        <div class="practice-title">
                            <span>üßä</span>
                            TRY IT NOW
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">Do you have access to:</p>
                            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap; margin-bottom: 1rem;">
                                <label class="reflection-checkbox" style="flex: 1;">
                                    <input type="checkbox" id="iceBowl"> Ice and bowl
                                </label>
                                <label class="reflection-checkbox" style="flex: 1;">
                                    <input type="checkbox" id="icePack"> Ice pack
                                </label>
                                <label class="reflection-checkbox" style="flex: 1;">
                                    <input type="checkbox" id="coldSink"> Cold water from sink
                                </label>
                            </div>
                        </div>
                        
                        <div class="practice-buttons">
                            <button id="coldWaterGuideBtn" class="btn-practice btn-practice-primary">Yes - Guide Me</button>
                            <button id="coldWaterSkipBtn" class="btn-practice btn-practice-secondary">No - Skip Practice</button>
                        </div>
                        
                        <div id="coldWaterGuided" style="display: none; margin-top: 1.5rem;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Step 1:</strong> Rate your current intensity (0-10)
                            </p>
                            <input type="range" id="coldWaterBeforeSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Calm</span>
                                <span style="color: var(--text-teal); font-weight: 700;" id="coldWaterBeforeValue">5</span>
                                <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Overwhelming</span>
                            </div>
                            
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Step 2:</strong> Get your cold water ready. We'll wait.
                            </p>
                            
                            <button id="coldWaterReadyBtn" class="btn-practice btn-practice-primary" style="margin-bottom: 1rem;">Ready! ‚Üí</button>
                            
                            <div id="coldWaterTimer" style="display: none;">
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    <strong>Step 3:</strong> Take a normal breath in. Hold it. Dunk your face or apply ice pack for 15 seconds.
                                </p>
                                <div class="timer-container">
                                    <div class="timer-display" id="coldWaterTimerDisplay">15</div>
                                    <button id="coldWaterStartTimer" class="btn-practice btn-practice-primary">Start Timer</button>
                                </div>
                            </div>
                            
                            <div id="coldWaterAfter" style="display: none; margin-top: 1.5rem;">
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    <strong>Step 4:</strong> Rate your intensity now (0-10)
                                </p>
                                <input type="range" id="coldWaterAfterSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Calm</span>
                                    <span style="color: var(--text-teal); font-weight: 700;" id="coldWaterAfterValue">5</span>
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Overwhelming</span>
                                </div>
                                
                                <div id="coldWaterResult" style="background: rgba(14,116,144,0.15); padding: 1rem; border-radius: 0.75rem; margin-bottom: 1rem;">
                                    <p style="color: var(--text-teal-light);">Your result will appear here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="saveColdWaterBtn" class="btn btn--save">
                        <span>üßä</span> Save Cold Water to Toolkit
                    </button>
                    <div id="coldWaterSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- INTENSE EXERCISE -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üí™</span>
                        <span class="section-title-text">Intense Exercise</span>
                    </div>
                    
                    <div class="card__content">
                        <p>
                            "When you're flooded with stress hormones (adrenaline, cortisol), your body is literally primed for physical action. Intense exercise <strong>metabolizes these chemicals</strong> ‚Äî you burn through the fuel of panic. This is why pacing, running, or intense movement can shift your state."
                        </p>
                    </div>
                    
                    <div class="technique-stats">
                        <div class="stat">
                            <div class="stat-label">Speed</div>
                            <div class="stat-value">‚ö° 3-5 min</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Best for</div>
                            <div class="stat-value">üéØ Restless panic, rage</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Intensity</div>
                            <div class="stat-value">üí™ High</div>
                        </div>
                    </div>
                    
                    <div class="instruction-box">
                        <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.75rem;">How To Do It:</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 0.75rem 0 0.25rem;">Option 1: Sprint/Run</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.75rem;">Run as fast as you can for 1-2 minutes, walk 1 minute, repeat 3-5 times</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 0.75rem 0 0.25rem;">Option 2: Jumping Jacks</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.75rem;">Do 50-100 jumping jacks as fast as possible, rest 30 seconds, repeat 3 times</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 0.75rem 0 0.25rem;">Option 3: Stair Sprints</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.75rem;">Run up stairs, walk down, repeat 5-10 times</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 0.75rem 0 0.25rem;">Option 4: Wall Sits or Planks</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">Hold wall sit for 60 seconds, rest 30 seconds, repeat 3 times</p>
                    </div>
                    
                    <p style="color: var(--text-teal); font-size: 0.875rem; font-weight: 600; margin: 0.75rem 0;">
                        The Key: It needs to be intense enough that you can't think about anything else. You should be breathing hard.
                    </p>
                    
                    <div class="practice-card" id="exercisePractice">
                        <div class="practice-title">
                            <span>üí™</span>
                            PRACTICE NOW
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">Can you do 2 minutes of movement?</p>
                            <div class="practice-buttons">
                                <button id="exerciseYesBtn" class="btn-practice btn-practice-primary">Yes - Let's Do It</button>
                                <button id="exerciseNoBtn" class="btn-practice btn-practice-secondary">Not Right Now</button>
                            </div>
                        </div>
                        
                        <div id="exerciseGuided" style="display: none;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Step 1:</strong> Rate your current energy (0-10)
                            </p>
                            <input type="range" id="energyBeforeSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Low</span>
                                <span style="color: var(--text-teal); font-weight: 700;" id="energyBeforeValue">5</span>
                                <span style="color: var(--text-muted); font-size: 0.75rem;">10 - High</span>
                            </div>
                            
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Step 2:</strong> Choose your exercise
                            </p>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                                <button class="reflection-checkbox">Jumping Jacks</button>
                                <button class="reflection-checkbox">Run in Place</button>
                                <button class="reflection-checkbox">Stairs</button>
                                <button class="reflection-checkbox">Other</button>
                            </div>
                            
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Step 3:</strong> Intervals ‚Äî 30 seconds INTENSE movement, 30 seconds rest, repeat 4 times
                            </p>
                            
                            <button id="startWorkoutBtn" class="btn-practice btn-practice-primary" style="margin-bottom: 1rem;">Start Workout ‚Üí</button>
                            
                            <div id="workoutTimer" style="display: none;">
                                <div class="timer-container">
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-teal); margin-bottom: 0.5rem;" id="workoutPhase">GO!</div>
                                    <div class="timer-display" id="workoutTimerDisplay">30</div>
                                    <div style="color: var(--text-muted); margin-bottom: 1rem;" id="workoutRound">Round 1 of 4</div>
                                </div>
                            </div>
                            
                            <div id="exerciseAfter" style="display: none; margin-top: 1.5rem;">
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    <strong>Step 4:</strong> Rate your energy now (0-10)
                                </p>
                                <input type="range" id="energyAfterSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Low</span>
                                    <span style="color: var(--text-teal); font-weight: 700;" id="energyAfterValue">5</span>
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">10 - High</span>
                                </div>
                                
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    Rate your mental clarity (0-10)
                                </p>
                                <input type="range" id="clarityAfterSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Foggy</span>
                                    <span style="color: var(--text-teal); font-weight: 700;" id="clarityAfterValue">5</span>
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Clear</span>
                                </div>
                                
                                <div id="exerciseResult" style="background: rgba(14,116,144,0.15); padding: 1rem; border-radius: 0.75rem;">
                                    <p style="color: var(--text-teal-light);">Your result will appear here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="saveExerciseBtn" class="btn btn--save">
                        <span>üí™</span> Save Intense Exercise to Toolkit
                    </button>
                    <div id="exerciseSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- PACED BREATHING -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üå¨Ô∏è</span>
                        <span class="section-title-text">Paced Breathing ‚Äî The Exhale Advantage</span>
                    </div>
                    
                    <div class="card__content">
                        <p>
                            "Your heart rate and breathing are connected through your autonomic nervous system. When you breathe in, your heart speeds up slightly. When you breathe out, it slows down. By making your <strong>exhales longer than your inhales</strong>, you activate your body's natural calming system."
                        </p>
                    </div>
                    
                    <div class="technique-stats">
                        <div class="stat">
                            <div class="stat-label">Speed</div>
                            <div class="stat-value">‚ö° 2-3 min</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Best for</div>
                            <div class="stat-value">üéØ Moderate anxiety</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Intensity</div>
                            <div class="stat-value">üí™ Low</div>
                        </div>
                    </div>
                    
                    <div class="instruction-box">
                        <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.75rem;">How To Do It:</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 0.75rem 0 0.25rem;">The 4-6-8 Pattern (recommended)</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">Breathe IN for 4 seconds ‚Üí HOLD for 6 seconds ‚Üí Breathe OUT for 8 seconds</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 1rem 0 0.25rem;">Box Breathing</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">IN for 4 ‚Üí HOLD for 4 ‚Üí OUT for 4 ‚Üí HOLD for 4</p>
                        
                        <p style="color: var(--text-teal-light); font-weight: 600; margin: 1rem 0 0.25rem;">4-7-8 (sleep-focused)</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">IN for 4 ‚Üí HOLD for 7 ‚Üí OUT for 8</p>
                    </div>
                    
                    <p style="color: var(--text-teal); font-size: 0.875rem; font-weight: 600; margin: 0.75rem 0;">
                        Key Principle: Exhale should be longer than inhale.
                    </p>
                    
                    <div class="practice-card">
                        <div class="practice-title">
                            <span>üå¨Ô∏è</span>
                            GUIDED BREATHING PRACTICE
                        </div>
                        
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Let's practice together for 3 minutes.</p>
                        
                        <button id="startBreathingBtn" class="btn-practice btn-practice-primary" style="margin-bottom: 1rem;">Start Breathing Practice ‚Üí</button>
                        
                        <div id="breathingPractice" style="display: none;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Before we start:</strong> Rate your current tension (0-10)
                            </p>
                            <input type="range" id="tensionBeforeSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Calm</span>
                                <span style="color: var(--text-teal); font-weight: 700;" id="tensionBeforeValue">5</span>
                                <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Tense</span>
                            </div>
                            
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <div style="width: 100px; height: 100px; border-radius: 50%; background: var(--gradient-subtle); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; transition: all 4s;" id="breathCircle">
                                    <span style="font-size: 1.5rem; color: var(--text-teal);" id="breathInstruction">Ready</span>
                                </div>
                                
                                <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                    <button id="beginBreathCycle" class="btn-practice btn-practice-primary">Begin</button>
                                    <button id="stopBreathCycle" class="btn-practice btn-practice-secondary" style="display: none;">Stop</button>
                                </div>
                            </div>
                            
                            <div id="breathingAfter" style="display: none; margin-top: 1.5rem;">
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    <strong>After practice:</strong> Rate your tension now (0-10)
                                </p>
                                <input type="range" id="tensionAfterSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Calm</span>
                                    <span style="color: var(--text-teal); font-weight: 700;" id="tensionAfterValue">5</span>
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Tense</span>
                                </div>
                                
                                <div id="breathingResult" style="background: rgba(14,116,144,0.15); padding: 1rem; border-radius: 0.75rem;">
                                    <p style="color: var(--text-teal-light);">Your result will appear here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="safety-note" style="margin-top: 1rem;">
                        <strong>‚ö†Ô∏è Note:</strong> Some people feel MORE anxious focusing on breath. If that's you, skip this and use other tools.
                    </div>
                    
                    <button id="saveBreathingBtn" class="btn btn--save">
                        <span>üå¨Ô∏è</span> Save Paced Breathing to Toolkit
                    </button>
                    <div id="breathingSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- PROGRESSIVE MUSCLE RELAXATION -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üíÜ</span>
                        <span class="section-title-text">Progressive Muscle Relaxation</span>
                    </div>
                    
                    <div class="card__content">
                        <p>
                            "You can't be physically tense and mentally relaxed at the same time. PMR works by deliberately tensing then releasing muscle groups, which teaches your body what 'relaxed' actually feels like. Many people hold chronic tension without realizing it."
                        </p>
                    </div>
                    
                    <div class="technique-stats">
                        <div class="stat">
                            <div class="stat-label">Speed</div>
                            <div class="stat-value">‚ö° 5-10 min</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Best for</div>
                            <div class="stat-value">üéØ Physical tension</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Intensity</div>
                            <div class="stat-value">üí™ Low</div>
                        </div>
                    </div>
                    
                    <div class="instruction-box">
                        <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.75rem;">Quick Version (2 minutes):</p>
                        <ul class="instruction-list">
                            <li>Hands: Clench fists tight for 5 seconds, release</li>
                            <li>Arms: Tense biceps, release</li>
                            <li>Shoulders: Pull shoulders to ears, release</li>
                            <li>Face: Scrunch face tight, release</li>
                            <li>Legs: Point toes and tense legs, release</li>
                        </ul>
                    </div>
                    
                    <div class="practice-card">
                        <div class="practice-title">
                            <span>üíÜ</span>
                            TRY QUICK PMR (2 min)
                        </div>
                        
                        <button id="startPMRBtn" class="btn-practice btn-practice-primary" style="margin-bottom: 1rem;">Start Guided Practice</button>
                        
                        <div id="pmrPractice" style="display: none;">
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                Rate your tension (0-10)
                            </p>
                            <input type="range" id="pmrBeforeSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Relaxed</span>
                                <span style="color: var(--text-teal); font-weight: 700;" id="pmrBeforeValue">5</span>
                                <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Tense</span>
                            </div>
                            
                            <div id="pmrGuided" style="background: rgba(15,23,42,0.6); padding: 1.25rem; border-radius: 0.75rem;">
                                <p style="color: var(--text-teal-light); margin-bottom: 0.75rem; font-weight: 600;" id="pmrInstruction">Hands: Make tight fists‚Ä¶ tighter‚Ä¶ hold‚Ä¶</p>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="color: var(--text-muted);" id="pmrTimer">5</span>
                                    <button id="pmrNextBtn" class="btn-practice btn-practice-primary" style="width: auto; padding: 0.5rem 1.5rem;">Next ‚Üí</button>
                                </div>
                            </div>
                            
                            <div id="pmrAfter" style="display: none; margin-top: 1.5rem;">
                                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                    Rate your tension now (0-10)
                                </p>
                                <input type="range" id="pmrAfterSlider" min="0" max="10" value="5" step="1" style="width: 100%; margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">0 - Relaxed</span>
                                    <span style="color: var(--text-teal); font-weight: 700;" id="pmrAfterValue">5</span>
                                    <span style="color: var(--text-muted); font-size: 0.75rem;">10 - Tense</span>
                                </div>
                                
                                <div id="pmrResult" style="background: rgba(14,116,144,0.15); padding: 1rem; border-radius: 0.75rem;">
                                    <p style="color: var(--text-teal-light);">Your result will appear here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="savePMRBtn" class="btn btn--save">
                        <span>üíÜ</span> Save PMR to Toolkit
                    </button>
                    <div id="pmrSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- TEMPERATURE SHOCK -->
                <div class="card">
                    <div class="section-header">
                        <span class="section-icon">üî•</span>
                        <span class="section-title-text">Temperature Shock</span>
                    </div>
                    
                    <div class="card__content">
                        <p>
                            "Extreme temperature changes create immediate physical sensations that can interrupt emotional overwhelm. Your brain has limited processing capacity ‚Äî intense physical sensation takes up 'bandwidth' that would otherwise spiral into panic."
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div style="background: rgba(14,116,144,0.1); padding: 1rem; border-radius: 0.75rem;">
                            <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.5rem;">‚ùÑÔ∏è Cold</p>
                            <ul style="color: var(--text-secondary); font-size: 0.8125rem; list-style-position: inside;">
                                <li>Ice cubes in hands</li>
                                <li>Cold shower</li>
                                <li>Walk outside in cold</li>
                            </ul>
                        </div>
                        <div style="background: rgba(217,119,6,0.1); padding: 1rem; border-radius: 0.75rem;">
                            <p style="color: var(--text-amber); font-weight: 700; margin-bottom: 0.5rem;">üî• Heat</p>
                            <ul style="color: var(--text-secondary); font-size: 0.8125rem; list-style-position: inside;">
                                <li>Very hot (not burning) shower</li>
                                <li>Heating pad on chest</li>
                                <li>Hands under hot water</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: rgba(14,116,144,0.1); padding: 1rem; border-radius: 0.75rem; margin-bottom: 0.5rem;">
                        <p style="color: var(--text-teal); font-weight: 700; margin-bottom: 0.25rem;">When to Use:</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">‚Ä¢ When numb/dissociated (temperature brings you back to body)</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">‚Ä¢ When emotionally overwhelmed</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">‚Ä¢ When physical pain urges arise (this is a safe intense sensation)</p>
                    </div>
                    
                    <div class="safety-note">
                        <strong>‚ö†Ô∏è Important:</strong> This is about sensation, not harm. Don't use temperatures that cause injury.
                    </div>
                    
                    <button id="saveTempBtn" class="btn btn--save">
                        <span>üå°Ô∏è</span> Save Temperature Techniques to Toolkit
                    </button>
                    <div id="tempSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- MODULE SUMMARY -->
                <div class="reference-card">
                    <div class="reference-title">
                        <span>üö®</span>
                        PHYSICAL RESET TOOLS ‚Äî Quick Reference
                    </div>
                    
                    <div class="reference-grid">
                        <div class="reference-item">
                            <span class="reference-icon">üßä</span>
                            <div class="reference-content">
                                <div class="reference-name">Cold Water</div>
                                <div class="reference-use">30 sec ‚Ä¢ Panic, rage, instant calm</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-icon">üí™</span>
                            <div class="reference-content">
                                <div class="reference-name">Intense Exercise</div>
                                <div class="reference-use">5 min ‚Ä¢ Restless energy, want to explode</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-icon">üå¨Ô∏è</span>
                            <div class="reference-content">
                                <div class="reference-name">Paced Breathing</div>
                                <div class="reference-use">3 min ‚Ä¢ Moderate anxiety, racing thoughts</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-icon">üíÜ</span>
                            <div class="reference-content">
                                <div class="reference-name">Muscle Relaxation</div>
                                <div class="reference-use">2-10 min ‚Ä¢ Physical tension, mild anxiety</div>
                            </div>
                        </div>
                        <div class="reference-item">
                            <span class="reference-icon">üå°Ô∏è</span>
                            <div class="reference-content">
                                <div class="reference-name">Temperature Shock</div>
                                <div class="reference-use">1-2 min ‚Ä¢ Numbness, dissociation</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-softer);">
                        <p style="color: var(--text-primary); font-weight: 700; margin-bottom: 1rem;">
                            "Which 2-3 techniques felt most accessible to you?"
                        </p>
                        
                        <div class="reflection-grid" id="techniqueCheckboxes">
                            <label class="reflection-checkbox">
                                <input type="checkbox" value="Cold Water"> Cold water
                            </label>
                            <label class="reflection-checkbox">
                                <input type="checkbox" value="Intense Exercise"> Intense exercise
                            </label>
                            <label class="reflection-checkbox">
                                <input type="checkbox" value="Paced Breathing"> Paced breathing
                            </label>
                            <label class="reflection-checkbox">
                                <input type="checkbox" value="Muscle Relaxation"> Muscle relaxation
                            </label>
                            <label class="reflection-checkbox">
                                <input type="checkbox" value="Temperature Shock"> Temperature shock
                            </label>
                        </div>
                        
                        <div style="background: rgba(217,119,6,0.1); padding: 1.25rem; border-radius: 0.75rem; margin-top: 1.5rem;">
                            <p style="color: var(--text-amber-light); font-weight: 600; margin-bottom: 1rem; text-align: center;">
                                "Crisis skills only work if you practice when calm. Will you commit to practicing your top 2 techniques this week?"
                            </p>
                            <div style="display: flex; gap: 0.75rem;">
                                <button id="commitYesBtn" class="btn-practice btn-practice-primary" style="flex: 1;">Yes, I Commit</button>
                                <button id="commitLaterBtn" class="btn-practice btn-practice-secondary" style="flex: 1;">Maybe Later</button>
                            </div>
                        </div>
                    </div>
                    
                    <button id="saveReflectionBtn" class="btn btn--save" style="margin-top: 1.5rem;">
                        <span>üìã</span> Save My Top Techniques to Toolkit
                    </button>
                    <div id="reflectionSaveFeedback" class="save-feedback"></div>
                </div>

                <!-- NAVIGATION -->
                <div class="btn-group">
                    <a href="crisis-module-1.html" class="btn btn--secondary">
                        <span>‚Üê</span>
                        <span>Module 1</span>
                    </a>
                    <a href="crisis-module-3.html" class="btn btn--primary">
                        <span>Module 3</span>
                        <span>‚Üí</span>
                    </a>
                </div>

                <!-- PRACTICE BUTTON -->
                <div class="practice-section">
                    <button id="markPracticedBtn" class="practice-btn">
                        <span>‚úì</span>
                        <span>I've practiced this module</span>
                    </button>
                </div>

                <!-- FOOTER -->
                <div class="footer">
                    <p class="footer__warning">‚ö†Ô∏è EDUCATIONAL ONLY ‚Äî NOT THERAPY</p>
                    <div class="footer__resources">
                        <p>988 Suicide & Crisis Lifeline: Call or text 988</p>
                        <p>Crisis Text Line: Text HOME to 741741</p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    // Check disclaimer acknowledgment
    const acknowledged = localStorage.getItem('crisis_disclaimer_acknowledged');
    if (!acknowledged) {
        window.location.href = 'crisis-intro.html';
        return;
    }

    // Update progress
    let progress = JSON.parse(localStorage.getItem('crisis_course_progress') || '{}');
    progress.currentModule = 2;
    progress.lastAccessed = new Date().toISOString();
    localStorage.setItem('crisis_course_progress', JSON.stringify(progress));

    // Storage helpers
    function saveToCrisisPlan(key, value) {
        try {
            let plan = JSON.parse(localStorage.getItem('crisis_plan') || '{}');
            plan[key] = value;
            plan.lastUpdated = new Date().toISOString();
            localStorage.setItem('crisis_plan', JSON.stringify(plan));
            return true;
        } catch (e) {
            console.error('Save to crisis plan failed:', e);
            return false;
        }
    }
    
    function saveToToolkit(item) {
        try {
            let toolkit = JSON.parse(localStorage.getItem('crisis_toolkit') || '[]');
            toolkit = toolkit.filter(t => t.id !== item.id);
            toolkit.push({
                ...item,
                date: new Date().toISOString()
            });
            localStorage.setItem('crisis_toolkit', JSON.stringify(toolkit));
            return true;
        } catch (e) {
            console.error('Save to toolkit failed:', e);
            return false;
        }
    }

    // Slider updates
    function setupSlider(sliderId, valueId) {
        const slider = document.getElementById(sliderId);
        const value = document.getElementById(valueId);
        if (slider && value) {
            slider.addEventListener('input', function() {
                value.textContent = this.value;
            });
        }
    }

    setupSlider('coldWaterBeforeSlider', 'coldWaterBeforeValue');
    setupSlider('coldWaterAfterSlider', 'coldWaterAfterValue');
    setupSlider('energyBeforeSlider', 'energyBeforeValue');
    setupSlider('energyAfterSlider', 'energyAfterValue');
    setupSlider('clarityAfterSlider', 'clarityAfterValue');
    setupSlider('tensionBeforeSlider', 'tensionBeforeValue');
    setupSlider('tensionAfterSlider', 'tensionAfterValue');
    setupSlider('pmrBeforeSlider', 'pmrBeforeValue');
    setupSlider('pmrAfterSlider', 'pmrAfterValue');

    // Cold Water Practice
    const coldGuideBtn = document.getElementById('coldWaterGuideBtn');
    const coldSkipBtn = document.getElementById('coldWaterSkipBtn');
    const coldGuided = document.getElementById('coldWaterGuided');
    
    if (coldGuideBtn) {
        coldGuideBtn.addEventListener('click', function() {
            coldGuided.style.display = 'block';
            coldGuideBtn.style.display = 'none';
            coldSkipBtn.style.display = 'none';
        });
    }
    
    if (coldSkipBtn) {
        coldSkipBtn.addEventListener('click', function() {
            this.textContent = 'Skipped';
            this.disabled = true;
        });
    }

    const coldReadyBtn = document.getElementById('coldWaterReadyBtn');
    const coldTimer = document.getElementById('coldWaterTimer');
    
    if (coldReadyBtn) {
        coldReadyBtn.addEventListener('click', function() {
            coldTimer.style.display = 'block';
            coldReadyBtn.style.display = 'none';
        });
    }

    const coldStartTimer = document.getElementById('coldWaterStartTimer');
    const coldTimerDisplay = document.getElementById('coldWaterTimerDisplay');
    const coldAfter = document.getElementById('coldWaterAfter');
    const coldResult = document.getElementById('coldWaterResult');
    
    if (coldStartTimer) {
        coldStartTimer.addEventListener('click', function() {
            let timeLeft = 15;
            coldTimerDisplay.textContent = timeLeft;
            coldStartTimer.disabled = true;
            
            const interval = setInterval(function() {
                timeLeft--;
                coldTimerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    coldStartTimer.style.display = 'none';
                    coldAfter.style.display = 'block';
                    
                    const before = parseInt(document.getElementById('coldWaterBeforeSlider')?.value || '5');
                    const after = parseInt(document.getElementById('coldWaterAfterSlider')?.value || '3');
                    coldResult.innerHTML = `<p style="color: var(--text-teal-light);">You went from ${before} to ${after}. Your heart rate likely slowed ‚Äî that's the dive reflex working.</p>`;
                }
            }, 1000);
        });
    }

    // Exercise Practice
    const exerciseYesBtn = document.getElementById('exerciseYesBtn');
    const exerciseNoBtn = document.getElementById('exerciseNoBtn');
    const exerciseGuided = document.getElementById('exerciseGuided');
    
    if (exerciseYesBtn) {
        exerciseYesBtn.addEventListener('click', function() {
            exerciseGuided.style.display = 'block';
            exerciseYesBtn.style.display = 'none';
            exerciseNoBtn.style.display = 'none';
        });
    }
    
    if (exerciseNoBtn) {
        exerciseNoBtn.addEventListener('click', function() {
            this.textContent = 'Skipped';
            this.disabled = true;
        });
    }

    const startWorkoutBtn = document.getElementById('startWorkoutBtn');
    const workoutTimer = document.getElementById('workoutTimer');
    const workoutPhase = document.getElementById('workoutPhase');
    const workoutTimerDisplay = document.getElementById('workoutTimerDisplay');
    const workoutRound = document.getElementById('workoutRound');
    const exerciseAfter = document.getElementById('exerciseAfter');
    const exerciseResult = document.getElementById('exerciseResult');
    
    if (startWorkoutBtn) {
        startWorkoutBtn.addEventListener('click', function() {
            workoutTimer.style.display = 'block';
            startWorkoutBtn.style.display = 'none';
            
            let round = 1;
            let isWorkout = true;
            let timeLeft = 30;
            
            const interval = setInterval(function() {
                timeLeft--;
                workoutTimerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    if (isWorkout) {
                        isWorkout = false;
                        timeLeft = 30;
                        workoutPhase.textContent = 'REST';
                        workoutPhase.style.color = 'var(--text-amber)';
                    } else {
                        isWorkout = true;
                        timeLeft = 30;
                        round++;
                        workoutPhase.textContent = 'GO!';
                        workoutPhase.style.color = 'var(--text-teal)';
                        workoutRound.textContent = `Round ${round} of 4`;
                    }
                    
                    if (round > 4) {
                        clearInterval(interval);
                        workoutTimer.style.display = 'none';
                        exerciseAfter.style.display = 'block';
                        
                        const energyBefore = parseInt(document.getElementById('energyBeforeSlider')?.value || '5');
                        const energyAfter = parseInt(document.getElementById('energyAfterSlider')?.value || '7');
                        const clarityAfter = parseInt(document.getElementById('clarityAfterSlider')?.value || '6');
                        
                        exerciseResult.innerHTML = `<p style="color: var(--text-teal-light);">Energy shift: ${energyBefore} ‚Üí ${energyAfter}<br>Clarity shift: ${clarityAfter}/10<br>Notice how your body feels different?</p>`;
                    }
                }
            }, 1000);
        });
    }

    // Breathing Practice
    const startBreathingBtn = document.getElementById('startBreathingBtn');
    const breathingPractice = document.getElementById('breathingPractice');
    
    if (startBreathingBtn) {
        startBreathingBtn.addEventListener('click', function() {
            breathingPractice.style.display = 'block';
            startBreathingBtn.style.display = 'none';
        });
    }

    const beginBreathCycle = document.getElementById('beginBreathCycle');
    const stopBreathCycle = document.getElementById('stopBreathCycle');
    const breathCircle = document.getElementById('breathCircle');
    const breathInstruction = document.getElementById('breathInstruction');
    const breathingAfter = document.getElementById('breathingAfter');
    const breathingResult = document.getElementById('breathingResult');
    
    let breathInterval;
    
    if (beginBreathCycle) {
        beginBreathCycle.addEventListener('click', function() {
            beginBreathCycle.style.display = 'none';
            stopBreathCycle.style.display = 'inline-block';
            
            let breathPhase = 'inhale';
            let cycles = 0;
            
            breathInterval = setInterval(function() {
                if (breathPhase === 'inhale') {
                    breathPhase = 'hold';
                    breathCircle.style.transform = 'scale(1.3)';
                    breathCircle.style.background = 'rgba(14,116,144,0.2)';
                    breathInstruction.textContent = 'HOLD';
                    breathInstruction.style.color = 'var(--text-amber)';
                } else if (breathPhase === 'hold') {
                    breathPhase = 'exhale';
                    breathCircle.style.transform = 'scale(0.8)';
                    breathCircle.style.background = 'rgba(14,116,144,0.3)';
                    breathInstruction.textContent = 'EXHALE';
                    breathInstruction.style.color = 'var(--text-teal)';
                } else {
                    breathPhase = 'inhale';
                    breathCircle.style.transform = 'scale(1)';
                    breathCircle.style.background = 'rgba(14,116,144,0.15)';
                    breathInstruction.textContent = 'INHALE';
                    breathInstruction.style.color = 'var(--text-teal-light)';
                    cycles++;
                    
                    if (cycles >= 10) {
                        clearInterval(breathInterval);
                        breathCircle.style.transform = 'scale(1)';
                        breathInstruction.textContent = 'Complete';
                        stopBreathCycle.style.display = 'none';
                        breathingAfter.style.display = 'block';
                        
                        const before = parseInt(document.getElementById('tensionBeforeSlider')?.value || '5');
                        const after = parseInt(document.getElementById('tensionAfterSlider')?.value || '3');
                        breathingResult.innerHTML = `<p style="color: var(--text-teal-light);">Tension: ${before} ‚Üí ${after}<br>You just activated your parasympathetic nervous system.</p>`;
                    }
                }
            }, 4000);
        });
    }
    
    if (stopBreathCycle) {
        stopBreathCycle.addEventListener('click', function() {
            clearInterval(breathInterval);
            beginBreathCycle.style.display = 'inline-block';
            stopBreathCycle.style.display = 'none';
            breathCircle.style.transform = 'scale(1)';
            breathInstruction.textContent = 'Ready';
        });
    }

    // PMR Practice
    const startPMRBtn = document.getElementById('startPMRBtn');
    const pmrPractice = document.getElementById('pmrPractice');
    const pmrInstruction = document.getElementById('pmrInstruction');
    const pmrTimer = document.getElementById('pmrTimer');
    const pmrNextBtn = document.getElementById('pmrNextBtn');
    const pmrAfter = document.getElementById('pmrAfter');
    const pmrResult = document.getElementById('pmrResult');
    
    let pmrStep = 0;
    const pmrSteps = [
        { instruction: 'Hands: Make tight fists‚Ä¶ tighter‚Ä¶ hold‚Ä¶', timer: 5 },
        { instruction: '‚Ä¶and RELEASE. Feel the difference.', timer: 10 },
        { instruction: 'Arms: Bend elbows and tense biceps‚Ä¶ tight‚Ä¶', timer: 5 },
        { instruction: '‚Ä¶and RELEASE. Notice the warmth.', timer: 10 },
        { instruction: 'Shoulders: Pull shoulders up to ears‚Ä¶ squeeze‚Ä¶', timer: 5 },
        { instruction: '‚Ä¶and DROP them. Let them be heavy.', timer: 10 },
        { instruction: 'Face: Scrunch everything - eyes, nose, mouth‚Ä¶ tight‚Ä¶', timer: 5 },
        { instruction: '‚Ä¶and SOFTEN. Let your jaw hang loose.', timer: 10 },
        { instruction: 'Legs: Point toes, tense thighs and calves‚Ä¶', timer: 5 },
        { instruction: '‚Ä¶and RELEASE. Let legs be heavy.', timer: 10 },
        { instruction: 'Take 3 normal breaths. Notice your body now.', timer: 15 }
    ];
    
    if (startPMRBtn) {
        startPMRBtn.addEventListener('click', function() {
            pmrPractice.style.display = 'block';
            startPMRBtn.style.display = 'none';
            pmrStep = 0;
            updatePMRStep();
        });
    }
    
    function updatePMRStep() {
        if (pmrStep < pmrSteps.length) {
            pmrInstruction.textContent = pmrSteps[pmrStep].instruction;
            pmrTimer.textContent = pmrSteps[pmrStep].timer;
            
            let timeLeft = pmrSteps[pmrStep].timer;
            const timerInterval = setInterval(function() {
                timeLeft--;
                pmrTimer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                }
            }, 1000);
        } else {
            document.getElementById('pmrGuided').style.display = 'none';
            pmrAfter.style.display = 'block';
            
            const before = parseInt(document.getElementById('pmrBeforeSlider')?.value || '5');
            const after = parseInt(document.getElementById('pmrAfterSlider')?.value || '3');
            pmrResult.innerHTML = `<p style="color: var(--text-teal-light);">Tension: ${before} ‚Üí ${after}<br>Take 3 normal breaths. Notice your body now.</p>`;
        }
    }
    
    if (pmrNextBtn) {
        pmrNextBtn.addEventListener('click', function() {
            pmrStep++;
            updatePMRStep();
        });
    }

    // Checkbox visual state
    const checkboxes = document.querySelectorAll('.reflection-checkbox input[type="checkbox"]');
    checkboxes.forEach(cb => {
        cb.addEventListener('change', function() {
            const label = this.closest('.reflection-checkbox');
            if (this.checked) {
                label.classList.add('checked');
            } else {
                label.classList.remove('checked');
            }
        });
    });

    // Save buttons with animation
    function setupSaveButton(btnId, feedbackId, toolkitItem) {
        const btn = document.getElementById(btnId);
        const feedback = document.getElementById(feedbackId);
        
        if (btn) {
            btn.addEventListener('click', function() {
                saveToToolkit(toolkitItem);
                
                btn.classList.add('saved');
                btn.innerHTML = '<span>‚úì</span><span>Saved!</span>';
                feedback.textContent = '‚úì Saved to your toolkit.';
                feedback.classList.add('show');
                
                setTimeout(() => {
                    btn.classList.remove('saved');
                    btn.innerHTML = toolkitItem.btnHtml;
                    feedback.classList.remove('show');
                }, 3000);
            });
        }
    }

    setupSaveButton('saveColdWaterBtn', 'coldWaterSaveFeedback', {
        id: 'cold-water',
        category: 'Module 2: Physical Reset',
        name: 'Cold Water ‚Äî Dive Reflex',
        description: '30-60 seconds ‚Ä¢ Panic, rage, need instant calm ‚Ä¢ Dunk face in ice water or apply ice pack for 15-30 seconds',
        btnHtml: '<span>üßä</span> Save Cold Water to Toolkit'
    });

    setupSaveButton('saveExerciseBtn', 'exerciseSaveFeedback', {
        id: 'intense-exercise',
        category: 'Module 2: Physical Reset',
        name: 'Intense Exercise',
        description: '3-5 minutes ‚Ä¢ Restless panic, rage, "crawling out of skin" ‚Ä¢ Sprint, jumping jacks, stairs ‚Äî must be intense enough to breathe hard',
        btnHtml: '<span>üí™</span> Save Intense Exercise to Toolkit'
    });

    setupSaveButton('saveBreathingBtn', 'breathingSaveFeedback', {
        id: 'paced-breathing',
        category: 'Module 2: Physical Reset',
        name: 'Paced Breathing',
        description: '2-3 minutes ‚Ä¢ Moderate anxiety, racing thoughts ‚Ä¢ 4-6-8 pattern: IN 4, HOLD 6, OUT 8 ‚Ä¢ Exhale longer than inhale',
        btnHtml: '<span>üå¨Ô∏è</span> Save Paced Breathing to Toolkit'
    });

    setupSaveButton('savePMRBtn', 'pmrSaveFeedback', {
        id: 'pmr',
        category: 'Module 2: Physical Reset',
        name: 'Progressive Muscle Relaxation',
        description: '5-10 minutes ‚Ä¢ Physical tension, mild anxiety ‚Ä¢ Tense each muscle group 5 sec, release 10 sec ‚Ä¢ Hands, arms, shoulders, face, legs',
        btnHtml: '<span>üíÜ</span> Save PMR to Toolkit'
    });

    setupSaveButton('saveTempBtn', 'tempSaveFeedback', {
        id: 'temperature',
        category: 'Module 2: Physical Reset',
        name: 'Temperature Shock',
        description: '1-2 minutes ‚Ä¢ Numbness, dissociation, need to feel present ‚Ä¢ Cold: ice cubes, cold shower ‚Ä¢ Heat: hot shower, heating pad ‚Ä¢ Sensation, not harm',
        btnHtml: '<span>üå°Ô∏è</span> Save Temperature Techniques to Toolkit'
    });

    // Save reflection
    const saveReflectionBtn = document.getElementById('saveReflectionBtn');
    const reflectionFeedback = document.getElementById('reflectionSaveFeedback');
    
    if (saveReflectionBtn) {
        saveReflectionBtn.addEventListener('click', function() {
            const checkedBoxes = document.querySelectorAll('#techniqueCheckboxes input[type="checkbox"]:checked');
            const techniques = Array.from(checkedBoxes).map(cb => cb.value);
            
            if (techniques.length === 0) {
                alert('Please select at least one technique.');
                return;
            }
            
            saveToToolkit({
                id: 'my-top-techniques',
                category: 'My Crisis Profile',
                name: 'My Top Physical Reset Techniques',
                description: techniques.join(', ')
            });
            
            saveToCrisisPlan('physicalTechniques', techniques);
            
            saveReflectionBtn.classList.add('saved');
            saveReflectionBtn.innerHTML = '<span>‚úì</span><span>Saved!</span>';
            reflectionFeedback.textContent = '‚úì Your top techniques have been saved to your crisis plan.';
            reflectionFeedback.classList.add('show');
            
            setTimeout(() => {
                saveReflectionBtn.classList.remove('saved');
                saveReflectionBtn.innerHTML = '<span>üìã</span> Save My Top Techniques to Toolkit';
                reflectionFeedback.classList.remove('show');
            }, 3000);
        });
    }

    // Commitment buttons
    const commitYesBtn = document.getElementById('commitYesBtn');
    const commitLaterBtn = document.getElementById('commitLaterBtn');
    
    if (commitYesBtn) {
        commitYesBtn.addEventListener('click', function() {
            this.textContent = '‚úì Committed!';
            this.style.background = 'var(--success-bg)';
            this.style.color = 'var(--success-emerald)';
            
            saveToCrisisPlan('practiceCommitment', {
                committed: true,
                date: new Date().toISOString(),
                module: 2
            });
        });
    }
    
    if (commitLaterBtn) {
        commitLaterBtn.addEventListener('click', function() {
            this.textContent = 'Maybe Later';
            this.disabled = true;
        });
    }

    // Mark as practiced
    const markBtn = document.getElementById('markPracticedBtn');
    
    if (markBtn) {
        let progress = JSON.parse(localStorage.getItem('crisis_course_progress') || '{}');
        if (progress.practicedModules && progress.practicedModules.includes('module2')) {
            markBtn.classList.add('marked');
            markBtn.innerHTML = '<span>‚úì</span><span>Module 2 Practiced</span>';
        }
        
        markBtn.addEventListener('click', function() {
            if (!progress.practicedModules) {
                progress.practicedModules = [];
            }
            
            if (!progress.practicedModules.includes('module2')) {
                progress.practicedModules.push('module2');
                progress.lastPracticed = new Date().toISOString();
                progress.currentModule = 2;
                localStorage.setItem('crisis_course_progress', JSON.stringify(progress));
                
                markBtn.classList.add('marked');
                markBtn.innerHTML = '<span>‚úì</span><span>Module 2 Practiced</span>';
            }
        });
    }

    // Load saved techniques
    function loadSavedTechniques() {
        const crisisPlan = JSON.parse(localStorage.getItem('crisis_plan') || '{}');
        const savedTechniques = crisisPlan.physicalTechniques || [];
        
        if (savedTechniques.length > 0) {
            const checkboxes = document.querySelectorAll('#techniqueCheckboxes .reflection-checkbox');
            checkboxes.forEach(label => {
                const cb = label.querySelector('input[type="checkbox"]');
                if (cb && savedTechniques.includes(cb.value)) {
                    cb.checked = true;
                    label.classList.add('checked');
                }
            });
        }
    }
    
    loadSavedTechniques();
})();
</script>
</body>
</html>
