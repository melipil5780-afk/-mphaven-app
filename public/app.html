<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f172a">
    <title>MPHaven</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;-webkit-font-smoothing:antialiased}html,body{width:100%;height:100%;overflow:hidden;position:fixed;overscroll-behavior:none}body{background:#0f172a;touch-action:pan-y}.container{width:100%;height:100vh;height:100dvh;display:flex;flex-direction:column}.app-wrapper{width:100%;max-width:28rem;height:100%;margin:0 auto;background:rgba(15,23,42,0.98);backdrop-filter:blur(40px);display:flex;flex-direction:column;position:relative;border-left:1px solid rgba(30,41,59,0.5);border-right:1px solid rgba(30,41,59,0.5)}.bg-blur-1{position:absolute;top:-5%;left:50%;transform:translateX(-50%);width:22rem;height:22rem;background:rgba(14,116,144,0.08);border-radius:50%;filter:blur(140px);pointer-events:none;z-index:0;opacity:0.6;transition:all 1.5s cubic-bezier(0.4,0,0.2,1)}.bg-blur-2{position:absolute;bottom:-5%;right:-5%;width:18rem;height:18rem;background:rgba(217,119,6,0.08);border-radius:50%;filter:blur(140px);pointer-events:none;z-index:0;opacity:0.6;transition:all 1.5s cubic-bezier(0.4,0,0.2,1)}.app-wrapper.warmth-1 .bg-blur-1,.app-wrapper.warmth-1 .bg-blur-2{opacity:0.2}.app-wrapper.warmth-2 .bg-blur-1,.app-wrapper.warmth-2 .bg-blur-2{opacity:0.3}.app-wrapper.warmth-3 .bg-blur-1,.app-wrapper.warmth-3 .bg-blur-2{opacity:0.4}.main-content{flex:1;overflow-y:auto;overflow-x:hidden;position:relative;z-index:1;-ms-overflow-style:none;scrollbar-width:none;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.main-content::-webkit-scrollbar{display:none}.nav-bar{position:relative;z-index:1000;border-top:1px solid rgba(30,41,59,0.5);background:rgba(15,23,42,0.98);backdrop-filter:blur(24px);box-shadow:0 -20px 25px -5px rgba(0,0,0,0.3);padding:0.75rem 0;padding-bottom:calc(0.75rem + env(safe-area-inset-bottom))}.nav-container{display:flex;align-items:center;justify-content:space-around;max-width:28rem;margin:0 auto}.nav-btn{position:relative;display:flex;flex-direction:column;align-items:center;gap:0.375rem;padding:0.5rem 1rem;background:none;border:none;cursor:pointer;transition:all 0.2s;min-width:80px;-webkit-tap-highlight-color:transparent}.nav-btn:active{transform:scale(0.96)}.nav-indicator{position:absolute;top:0;left:50%;transform:translateX(-50%);width:2.5rem;height:3px;background:linear-gradient(to right,#0e7490,#d97706);border-radius:9999px;opacity:0;transition:opacity 0.2s}.nav-indicator.active{opacity:1}.timer-badge{position:absolute;top:2px;right:2px;width:6px;height:6px;border-radius:50%;background:#d97706;opacity:0;transition:opacity 0.3s}.timer-badge.active{opacity:1;animation:pulseGlow 1.5s ease-in-out infinite}.nav-icon{width:24px;height:24px;transition:all 0.2s}.nav-icon.active{color:white;transform:scale(1.1)}.nav-icon.inactive{color:rgb(100,116,139)}.nav-label{font-size:0.6875rem;font-weight:600;transition:all 0.2s;white-space:nowrap}.nav-label.active{color:white}.nav-label.inactive{color:rgb(100,116,139)}.content-wrapper{padding:1.5rem;padding-bottom:8rem;min-height:100%}@keyframes gentleFadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@keyframes pulseGlow{0%,100%{opacity:1;box-shadow:0 0 8px rgba(217,119,6,0.6)}50%{opacity:0.7;box-shadow:0 0 4px rgba(217,119,6,0.3)}}@keyframes scaleIn{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}.fade-in{animation:gentleFadeIn 0.35s ease-out}.scale-in{animation:scaleIn 0.3s ease-out}.card{position:relative;overflow:hidden;border-radius:1.5rem;padding:1.5rem;transition:all 0.3s;box-shadow:0 25px 50px -12px rgba(0,0,0,0.25);cursor:pointer;-webkit-tap-highlight-color:transparent}.card:active{transform:scale(0.98)}.path-card{background:linear-gradient(135deg,rgba(30,41,59,0.8),rgba(15,23,42,0.6));border-radius:1.5rem;padding:1.75rem;transition:all 0.3s}.icon-container{border-radius:1rem;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 15px -3px rgba(0,0,0,0.1)}.feeling-emoji{width:2.5rem;height:2.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.25rem;cursor:pointer;transition:all 0.2s;border:2px solid transparent;background:rgba(255,255,255,0.05);-webkit-tap-highlight-color:transparent}.feeling-emoji:active{transform:scale(0.95)}.feeling-emoji.selected{border-color:rgba(165,243,252,0.5);background:rgba(165,243,252,0.1);transform:scale(1.1)}.journal-container{background:linear-gradient(135deg,rgba(14,116,144,0.08),rgba(217,119,6,0.05));border:1px solid rgba(14,116,144,0.2);border-radius:1.25rem;padding:1.5rem;margin-bottom:1.5rem}.journal-textarea{width:100%;background:rgba(30,41,59,0.5);border:1px solid rgba(51,65,85,0.4);border-radius:0.75rem;padding:1rem;color:white;font-size:1rem;min-height:180px;resize:none;font-family:inherit;line-height:1.6;margin-bottom:1rem}.journal-textarea::placeholder{color:rgb(100,116,139)}.journal-textarea:focus{outline:none;border-color:rgba(14,116,144,0.5);background:rgba(30,41,59,0.7)}.prompts-toggle{display:flex;align-items:center;gap:0.5rem;padding:0.75rem 0;background:none;border:none;color:rgb(148,163,184);font-size:0.875rem;cursor:pointer;width:100%;text-align:left;margin-bottom:0.5rem;-webkit-tap-highlight-color:transparent}.prompts-toggle:active{opacity:0.7}.toggle-icon{width:1rem;height:1rem;transition:transform 0.2s}.toggle-icon.expanded{transform:rotate(90deg)}.prompts-content{max-height:0;overflow:hidden;opacity:0;transition:all 0.3s ease}.prompts-content.open{max-height:300px;opacity:1}.prompt-chip{display:inline-block;padding:0.625rem 1rem;background:rgba(14,116,144,0.1);border:1px solid rgba(14,116,144,0.3);border-radius:9999px;color:rgb(165,243,252);font-size:0.875rem;margin:0.25rem;cursor:pointer;transition:all 0.2s;-webkit-tap-highlight-color:transparent}.prompt-chip:active{background:rgba(14,116,144,0.2);transform:translateY(-1px)}.save-button{width:100%;padding:1.125rem;border-radius:0.75rem;background:linear-gradient(to right,#0e7490,#d97706);color:white;font-weight:600;border:none;cursor:pointer;font-size:1rem;transition:all 0.2s;box-shadow:0 4px 12px rgba(14,116,144,0.3);-webkit-tap-highlight-color:transparent}.save-button:active{transform:scale(0.98)}.journal-entry{background:rgba(30,41,59,0.4);border:1px solid rgba(51,65,85,0.3);border-radius:1rem;padding:1.25rem;margin-bottom:1rem}.entry-date{color:rgb(148,163,184);font-size:0.8125rem;margin-bottom:0.75rem}.entry-content{color:rgb(203,213,225);font-size:0.9375rem;line-height:1.6;white-space:pre-wrap}.practice-timer{font-family:'SF Mono','Monaco','Cascadia Code',monospace;font-size:4rem;font-weight:700;background:linear-gradient(to right,#0e7490,#d97706);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-align:center;margin:2rem 0}.practice-button{width:100%;padding:1.25rem;border-radius:1rem;font-weight:600;font-size:1.125rem;border:none;cursor:pointer;margin:1rem 0;transition:all 0.2s;-webkit-tap-highlight-color:transparent}.practice-button:active{transform:scale(0.98)}.practice-button-start{background:linear-gradient(to right,#0e7490,#d97706);color:white;box-shadow:0 4px 12px rgba(14,116,144,0.3)}.practice-button-stop{background:rgba(239,68,68,0.2);border:2px solid rgba(239,68,68,0.4);color:rgb(252,165,165)}.practice-content{background:rgba(30,41,59,0.4);border:1px solid rgba(51,65,85,0.3);border-radius:1rem;padding:1.5rem;margin-top:1rem;color:rgb(203,213,225);text-align:center}.practice-emoji{font-size:3rem;margin:1rem 0;display:block}.practice-affirmation{font-style:italic;color:rgb(148,163,184);margin-top:1rem;padding:1rem;background:rgba(255,255,255,0.05);border-radius:0.75rem}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);z-index:9998;display:flex;align-items:center;justify-content:center;padding:1.25rem;opacity:0;animation:fadeIn 0.2s ease-out forwards}.modal-content{background:linear-gradient(135deg,rgba(30,41,59,0.95),rgba(15,23,42,0.95));border:1px solid rgba(14,116,144,0.3);border-radius:1.5rem;padding:2rem;max-width:28rem;width:100%;animation:slideUp 0.3s ease-out}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.post-practice-option{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:rgba(30,41,59,0.4);border:1px solid rgba(51,65,85,0.4);border-radius:1rem;margin-bottom:1rem;cursor:pointer;transition:all 0.2s;text-align:left;width:100%;color:inherit;font:inherit;-webkit-tap-highlight-color:transparent}.post-practice-option:active{background:rgba(30,41,59,0.6);transform:translateY(-1px)}.option-icon{font-size:2rem;width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;border-radius:0.75rem;flex-shrink:0}.option-content{flex:1}.option-title{color:white;font-weight:600;font-size:1rem;margin-bottom:0.25rem}.option-description{color:rgb(148,163,184);font-size:0.875rem}.modal-button{width:100%;padding:1rem;border-radius:0.75rem;font-weight:600;border:none;cursor:pointer;font-size:0.9375rem;transition:all 0.2s;margin-top:0.75rem;-webkit-tap-highlight-color:transparent}.modal-button:active{transform:scale(0.98)}.modal-button-primary{background:linear-gradient(to right,#0e7490,#d97706);color:white}.modal-button-secondary{background:transparent;color:rgb(148,163,184);border:1px solid rgb(100,116,139)}.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:rgba(30,41,59,0.95);border:1px solid rgba(14,116,144,0.3);border-radius:0.75rem;padding:1rem 1.5rem;color:white;font-weight:600;z-index:10000;opacity:0;transition:all 0.3s ease;backdrop-filter:blur(10px);box-shadow:0 10px 25px rgba(0,0,0,0.3)}.toast.show{transform:translateX(-50%) translateY(0);opacity:1}@media (min-width:640px){.app-wrapper{border-radius:2.5rem;height:844px}.container{padding:2rem;align-items:center;justify-content:center}}
    </style>
</head>
<body>
    <div class="container">
        <div class="app-wrapper" id="appWrapper">
            <div class="bg-blur-1"></div>
            <div class="bg-blur-2"></div>
            <div id="mainContent" class="main-content"></div>
            <div class="nav-bar">
                <div class="nav-container">
                    <button onclick="switchTab('home')" class="nav-btn" data-tab="home">
                        <div class="nav-indicator active"></div>
                        <svg class="nav-icon active" stroke-width="2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                        <span class="nav-label active">Home</span>
                    </button>
                    <button onclick="switchTab('paths')" class="nav-btn" data-tab="paths">
                        <div class="nav-indicator"></div>
                        <svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                        <span class="nav-label inactive">Paths</span>
                    </button>
                    <button onclick="switchTab('practice')" class="nav-btn" data-tab="practice">
                        <div class="nav-indicator"></div>
                        <div class="timer-badge"></div>
                        <svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span class="nav-label inactive">Practice</span>
                    </button>
                    <button onclick="switchTab('journal')" class="nav-btn" data-tab="journal">
                        <div class="nav-indicator"></div>
                        <svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                        <span class="nav-label inactive">Journal</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>
    <script>
const state={currentTab:'home',journalEntries:[],timerRunning:false,timerSeconds:0,currentPractice:'gratitude',currentFeeling:null,lastCheckIn:null,promptsOpen:false};const paths=[{id:'emotional',title:"Understanding Feelings",description:"Learn to recognize and be with your emotions",color:"#0e7490",icon:'M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5',started:true},{id:'mindfulness',title:"Mindfulness",description:"Cultivate awareness of the here and now",color:"#d97706",icon:'M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z',started:false},{id:'connection',title:"Meaningful Relationships",description:"Build deeper connections with others",color:"#dc2626",icon:'M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z',started:false},{id:'purpose',title:"Finding What Matters",description:"Discover what gives your life meaning",color:"#0891b2",icon:'M15 10.5a3 3 0 11-6 0 3 3 0 016 0z M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z',started:false}];let journalPrompts=["What are you grateful for today? üôè","Notice your breath for a moment üå¨Ô∏è","How does your body feel right now? üëÅÔ∏è","What's one small joy you noticed today? ‚ú®"];const practiceContent={gratitude:{instruction:"Take a moment to think of 3 things you're grateful for:",steps:["One person in your life","One experience recently","One thing about yourself"],emoji:"üôè",affirmation:"Gratitude turns what we have into enough."},breathing:{instruction:"Follow this breathing pattern:",steps:["Breathe in for 4 seconds","Hold for 4 seconds","Breathe out for 6 seconds","Repeat 5 times"],emoji:"üå¨Ô∏è",affirmation:"Your breath is always there to bring you back to the present."}};let timerInterval=null;const PRACTICE_TIME=30;function getIcon(i,sw='2'){return`<svg class="w-full h-full" stroke-width="${sw}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="${i}"/></svg>`}function scrollToTop(){document.getElementById('mainContent').scrollTop=0}function shouldShowCheckIn(){return state.lastCheckIn!==new Date().toDateString()}function handleFeelingSelect(f){state.currentFeeling=f;state.lastCheckIn=new Date().toDateString();saveState();document.querySelectorAll('.feeling-emoji').forEach(e=>e.classList.toggle('selected',e.dataset.feeling===f));setTimeout(()=>render(),600)}function updateWarmth(){const w=document.getElementById('appWrapper'),c=paths.filter(p=>p.started).length;w.className=c>=3?'app-wrapper warmth-3':c>=2?'app-wrapper warmth-2':c>=1?'app-wrapper warmth-1':'app-wrapper'}function switchTab(t){state.currentTab=t;render();document.querySelectorAll('.nav-btn').forEach(b=>{const ind=b.querySelector('.nav-indicator'),ic=b.querySelector('.nav-icon'),l=b.querySelector('.nav-label'),a=b.dataset.tab===t;ind.classList.toggle('active',a);ic.classList.toggle('active',a);ic.classList.toggle('inactive',!a);ic.setAttribute('stroke-width',a?'2.5':'2');l.classList.toggle('active',a);l.classList.toggle('inactive',!a)});updateTimerBadge();scrollToTop()}function updateTimerBadge(){document.querySelectorAll('.timer-badge').forEach(b=>b.classList.toggle('active',state.timerRunning))}function togglePrompts(){state.promptsOpen=!state.promptsOpen;const pc=document.getElementById('promptsContent');if(pc)pc.classList.toggle('open',state.promptsOpen);const ti=document.querySelector('.toggle-icon');if(ti)ti.classList.toggle('expanded',state.promptsOpen)}function addPrompt(p){const t=document.getElementById('newEntryText');if(t){const v=t.value.trim();t.value=v+(v?'\n\n':'')+p+'\n\n';t.focus();showToast("Prompt added üí≠")}}function startTimer(){if(state.timerRunning)return;state.timerRunning=true;state.timerSeconds=0;updateTimerBadge();timerInterval=setInterval(()=>{state.timerSeconds++;updateTimerUI();if(state.timerSeconds>=PRACTICE_TIME){stopTimer()}},1000);render();showToast("Practice started üå±")}function stopTimer(){state.timerRunning=false;clearInterval(timerInterval);updateTimerBadge();render();setTimeout(()=>showPostPracticeModal(),500)}function showPostPracticeModal(){showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:3rem;margin-bottom:1rem">‚ú®</div><h2 style="color:white;font-size:1.5rem;font-weight:700;margin-bottom:0.5rem">Practice Complete!</h2><p style="color:rgb(148,163,184);font-size:0.9375rem;margin-bottom:1.5rem">You practiced for 30 seconds</p><div style="display:flex;flex-direction:column;gap:0.75rem;margin-bottom:1rem"><button onclick="journalAfterPractice()" class="post-practice-option"><div class="option-icon" style="background:rgba(14,116,144,0.2);color:rgb(165,243,252)">üìù</div><div class="option-content"><div class="option-title">Journal About It</div><div class="option-description">Capture what you noticed</div></div></button><button onclick="practiceAgain()" class="post-practice-option"><div class="option-icon" style="background:rgba(217,119,6,0.2);color:rgb(253,230,138)">üîÑ</div><div class="option-content"><div class="option-title">Practice Again</div><div class="option-description">Build consistency</div></div></button><button onclick="learnMoreSkills()" class="post-practice-option"><div class="option-icon" style="background:rgba(34,197,94,0.2);color:rgb(134,239,172)">üìö</div><div class="option-content"><div class="option-title">Learn More Skills</div><div class="option-description">Explore another technique</div></div></button></div></div>`)}function journalAfterPractice(){closeModal();switchTab('journal');showToast("Ready to reflect üìù")}function practiceAgain(){closeModal();state.timerSeconds=0;updateTimerUI();startTimer()}function learnMoreSkills(){closeModal();switchTab('paths');showToast("Explore new skills üìö")}function updateTimerUI(){const d=document.getElementById('timerDisplay');if(d){const m=Math.floor(state.timerSeconds/60),s=state.timerSeconds%60;d.textContent=`${m}:${s.toString().padStart(2,'0')}`}}function saveJournalEntry(){const t=document.getElementById('newEntryText');if(!t)return;const c=t.value.trim();if(!c){showToast("Write something first");return}state.journalEntries.unshift({id:Date.now(),date:new Date().toISOString(),content:c});saveState();t.value='';render();showToast("Entry saved ‚ú®")}function deleteEntry(id){if(confirm("Delete this entry?")){state.journalEntries=state.journalEntries.filter(e=>e.id!==id);saveState();render();showToast("Entry deleted")}}function exportJournal(){if(state.journalEntries.length===0){showToast("No entries to export");return}const data={entries:state.journalEntries,exportDate:new Date().toISOString()};const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`mphaven-journal-${new Date().toISOString().split('T')[0]}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);showToast("Journal exported ‚úÖ")}function showPrivacyModal(){showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:2.5rem;margin-bottom:1rem">üîí</div><h3 style="color:white;font-size:1.5rem;margin-bottom:1rem">Privacy Protected</h3><p style="color:rgb(203,213,225);font-size:0.9375rem;margin-bottom:1.5rem;line-height:1.6">All your entries are saved locally on your device. No tracking, no analytics, no cloud storage. Your reflections stay private.</p><p style="color:rgb(148,163,184);font-size:0.875rem;margin-bottom:1.5rem">Getting a new phone? Export your journal below.</p><button onclick="exportJournal()" class="modal-button modal-button-primary">Export Journal</button><button onclick="closeModal()" class="modal-button modal-button-secondary">Close</button></div>`)}function startPath(id){const p=paths.find(p=>p.id===id);if(p){p.started=true;updateWarmth();saveState();window.location.href=`public/course-mindfulness.html?skill=${id}`}}function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000)}function showModal(c){const m=document.createElement('div');m.className='modal-overlay';m.innerHTML=`<div class="modal-content">${c}</div>`;m.onclick=e=>e.target===m&&closeModal();document.body.appendChild(m)}function closeModal(){const m=document.querySelector('.modal-overlay');if(m)m.remove()}function saveState(){localStorage.setItem('mphaven_state',JSON.stringify(state));localStorage.setItem('mphaven_paths',JSON.stringify(paths))}function loadState(){const s=localStorage.getItem('mphaven_state');if(s)Object.assign(state,JSON.parse(s));const p=localStorage.getItem('mphaven_paths');if(p){const l=JSON.parse(p);l.forEach((p,i)=>paths[i].started=p.started)}}function renderHome(){const sc=shouldShowCheckIn(),fe=['üòå','üòî','üòä','üò∞','üò¥','üòê'],fl=['Calm','Heavy','Joyful','Anxious','Tired','Neutral'],ap=paths.find(p=>p.started);return`<div class="content-wrapper fade-in">${sc?`<div style="padding:1.75rem;background:linear-gradient(135deg,rgba(14,116,144,0.15),rgba(217,119,6,0.1));border:1px solid rgba(14,116,144,0.3);border-radius:1.5rem;box-shadow:0 25px 50px -12px rgba(0,0,0,0.25);margin-bottom:2rem"><h3 style="color:white;font-size:1.125rem;font-weight:700;margin-bottom:1rem;text-align:center">How are you feeling?</h3><p style="color:rgb(203,213,225);font-size:0.875rem;text-align:center;margin-bottom:1.5rem">Take a moment to check in with yourself</p><div style="display:flex;justify-content:center;gap:0.75rem;margin-bottom:1.5rem;flex-wrap:wrap">${fe.map((e,i)=>`<button onclick="handleFeelingSelect('${fl[i].toLowerCase()}')" class="feeling-emoji" data-feeling="${fl[i].toLowerCase()}">${e}</button>`).join('')}</div><p style="color:rgb(100,116,139);font-size:0.75rem;text-align:center;font-style:italic">Just for you. Not tracked, not measured.</p></div>`:''}<div style="margin-bottom:2rem"><h1 style="color:white;font-size:3rem;font-weight:700;margin-bottom:1rem;line-height:1.2">Welcome<br/>back</h1><p style="color:rgb(203,213,225);font-size:1.125rem;line-height:1.6">Your sanctuary is here.</p></div>${ap?`<div style="margin-bottom:2rem"><h2 style="color:rgb(148,163,184);font-size:0.75rem;font-weight:700;margin-bottom:1.25rem;text-transform:uppercase;letter-spacing:0.1em">Continue</h2><button onclick="startPath('${ap.id}')" class="card" style="padding:1.75rem;background:linear-gradient(135deg,${ap.color}25,${ap.color}15);border:2px solid ${ap.color}50;text-align:left"><div style="display:flex;align-items:center;gap:1.25rem"><div class="icon-container" style="width:4rem;height:4rem;background:${ap.color}"><div style="width:2rem;height:2rem;color:white">${getIcon(ap.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.25rem;font-weight:700;margin-bottom:0.5rem">${ap.title}</h3><p style="color:rgb(203,213,225);font-size:0.875rem">${ap.description}</p></div><div style="width:3rem;height:3rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(14,116,144,0.3)"><svg style="width:1.5rem;height:1.5rem;color:rgb(165,243,252)" stroke-width="2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div></div></button></div>`:''}<div><h2 style="color:rgb(148,163,184);font-size:0.75rem;font-weight:700;margin-bottom:1.25rem;text-transform:uppercase;letter-spacing:0.1em">Explore</h2><div style="display:flex;flex-direction:column;gap:1rem">${paths.filter(p=>!p.started).slice(0,2).map(p=>`<button onclick="startPath('${p.id}')" class="card" style="background:linear-gradient(135deg,${p.color}15,${p.color}08);border:1px solid ${p.color}30;text-align:left"><div style="display:flex;align-items:center;gap:1rem"><div class="icon-container" style="width:3.5rem;height:3.5rem;background:${p.color}"><div style="width:1.75rem;height:1.75rem;color:white">${getIcon(p.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.125rem;font-weight:700;margin-bottom:0.25rem">${p.title}</h3><p style="color:rgb(148,163,184);font-size:0.875rem">${p.description}</p></div><svg style="width:1.25rem;height:1.25rem;color:rgb(100,116,139)" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div></button>`).join('')}</div><button onclick="switchTab('paths')" style="width:100%;margin-top:1.5rem;padding:1.25rem;background:rgba(30,41,59,0.5);border:1px solid rgba(51,65,85,0.5);border-radius:1rem;color:white;font-weight:700;font-size:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent" class="card">View all paths</button></div></div>`}function renderPaths(){return`<div class="content-wrapper fade-in"><div style="margin-bottom:2rem"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:0.5rem">Your Paths</h2><p style="color:rgb(148,163,184);font-size:1rem">Choose what speaks to you</p></div><div style="display:flex;flex-direction:column;gap:1rem">${paths.map(p=>`<button onclick="startPath('${p.id}')" class="path-card" style="border:1px solid ${p.color}40;background:linear-gradient(135deg,${p.color}20,${p.color}10);text-align:left"><div style="display:flex;align-items:center;gap:1.25rem"><div class="icon-container" style="width:4rem;height:4rem;background:${p.color}"><div style="width:2rem;height:2rem;color:white">${getIcon(p.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.25rem;font-weight:700;margin-bottom:0.5rem">${p.title}</h3><p style="color:rgb(203,213,225);font-size:0.875rem">${p.description}</p></div><div style="padding:0.5rem 0.75rem;border-radius:0.75rem;background:${p.color}40;color:white;font-size:0.75rem;font-weight:600">${p.started?'Continue':'Begin'}</div></div></button>`).join('')}</div></div>`}function renderPractice(){const pr=practiceContent[state.currentPractice];return`<div class="content-wrapper fade-in"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:0.5rem">Practice</h2><p style="color:rgb(148,163,184);font-size:1rem;margin-bottom:2rem">Build wellness habits</p><div style="text-align:center;padding:2rem 1.5rem;background:linear-gradient(135deg,rgba(14,116,144,0.08),rgba(217,119,6,0.08));border:1px solid rgba(14,116,144,0.3);border-radius:1.5rem;margin-bottom:1.5rem"><div id="timerDisplay" class="practice-timer">0:00</div>${state.timerRunning?`<button onclick="stopTimer()" class="practice-button practice-button-stop">‚èπÔ∏è Stop Practice</button>`:`<button onclick="startTimer()" class="practice-button practice-button-start">Start 30-Second Practice</button>`}<p style="color:rgb(203,213,225);font-size:0.875rem;margin-top:1rem">Find a quiet space and focus on your breath</p></div><div class="practice-content"><div style="margin-bottom:1rem;font-weight:500;color:white">${pr.instruction}</div>${pr.steps.map(s=>`<div style="margin-bottom:0.75rem;color:rgb(203,213,225)">${s}</div>`).join('')}<div class="practice-emoji">${pr.emoji}</div><div class="practice-affirmation">${pr.affirmation}</div></div><div style="margin-top:2rem"><h3 style="color:rgb(148,163,184);font-size:0.75rem;font-weight:700;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.1em">Practice Types</h3><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem"><button onclick="state.currentPractice='gratitude';render();showToast('Switched to gratitude üôè')" class="card" style="text-align:center;padding:1.5rem;border:${state.currentPractice==='gratitude'?'2px solid rgba(14,116,144,0.5)':'1px solid rgba(51,65,85,0.4)'}"><div style="font-size:2rem;margin-bottom:0.5rem">üôè</div><div style="color:white;font-weight:600">Gratitude</div></button><button onclick="state.currentPractice='breathing';render();showToast('Switched to breathing üå¨Ô∏è')" class="card" style="text-align:center;padding:1.5rem;border:${state.currentPractice==='breathing'?'2px solid rgba(14,116,144,0.5)':'1px solid rgba(51,65,85,0.4)'}"><div style="font-size:2rem;margin-bottom:0.5rem">üå¨Ô∏è</div><div style="color:white;font-weight:600">Breathing</div></button></div></div></div>`}function renderJournal(){return`<div class="content-wrapper fade-in"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:0.5rem">Journal</h2><p style="color:rgb(148,163,184);font-size:1rem;margin-bottom:2rem">${state.journalEntries.length} reflections</p><div class="journal-container"><textarea id="newEntryText" class="journal-textarea" placeholder="What's alive in your experience right now?..."></textarea><button onclick="togglePrompts()" class="prompts-toggle"><svg class="toggle-icon ${state.promptsOpen?'expanded':''}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg><span style="color:rgb(203,213,225);font-size:0.875rem;font-weight:600">‚ñ∂Ô∏è Reflection prompts</span></button><div id="promptsContent" class="prompts-content ${state.promptsOpen?'open':''}"><div style="padding:0.75rem 0">${journalPrompts.map(p=>`<button onclick="addPrompt('${p}')" class="prompt-chip">${p}</button>`).join('')}</div></div><button onclick="saveJournalEntry()" class="save-button">Save Reflection</button></div>${state.journalEntries.length>0?`<h3 style="color:rgb(148,163,184);font-size:0.75rem;font-weight:700;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.1em;margin-top:2rem">Past Reflections</h3>${state.journalEntries.map(e=>{const d=new Date(e.date),f=d.toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});return`<div class="journal-entry"><div class="entry-date">${f}</div><div class="entry-content">${e.content}</div><div style="margin-top:0.75rem;text-align:right"><button onclick="deleteEntry(${e.id})" style="background:none;border:none;color:rgb(148,163,184);font-size:0.75rem;cursor:pointer;text-decoration:underline">Delete</button></div></div>`}).join('')}`:`<div style="text-align:center;padding:3rem 1rem;margin-top:2rem"><div style="font-size:3rem;margin-bottom:1rem;opacity:0.4">üìì</div><p style="color:white;font-size:1rem;font-weight:600;margin-bottom:0.5rem">Your wellness journey begins here</p><p style="color:rgb(148,163,184);font-size:0.875rem;margin-bottom:1.5rem">Start with a reflection or explore a learning path</p><button onclick="switchTab('paths')" style="padding:0.875rem 1.5rem;border-radius:0.75rem;background:linear-gradient(to right,#0e7490,#d97706);color:white;font-weight:600;border:none;cursor:pointer">Explore Paths</button></div>`}<div style="display:flex;align-items:center;justify-content:space-between;padding:1rem;margin-top:1.5rem;background:rgba(14,116,144,0.05);border:1px solid rgba(14,116,144,0.15);border-radius:0.75rem;cursor:pointer" onclick="showPrivacyModal()"><div style="display:flex;align-items:center;gap:0.75rem"><svg style="width:1.5rem;height:1.5rem;color:rgb(165,243,252);opacity:0.7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg><div><div style="color:white;font-size:0.75rem;font-weight:600">Privacy protected</div><div style="color:rgb(148,163,184);font-size:0.75rem">Saved locally on your device</div></div></div><svg style="width:1.25rem;height:1.25rem;color:rgb(148,163,184)" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></div></div>`}function render(){const c=document.getElementById('mainContent');switch(state.currentTab){case 'home':c.innerHTML=renderHome();break;case 'paths':c.innerHTML=renderPaths();break;case 'practice':c.innerHTML=renderPractice();updateTimerUI();break;case 'journal':c.innerHTML=renderJournal();break}}loadState();updateWarmth();const urlParams=new URLSearchParams(window.location.search),tab=urlParams.get('tab');if(tab&&['home','paths','practice','journal'].includes(tab))state.currentTab=tab;render();switchTab(state.currentTab);window.addEventListener('beforeunload',saveState)
    </script>
</body>
</html>
```

**‚úÖ Updated!** Now when users click any path, they'll be directed to:
```
public/course-mindfulness.html?skill=emotional
public/course-mindfulness.html?skill=mindfulness
public/course-mindfulness.html?skill=connection
public/course-mindfulness.html?skill=purpose
