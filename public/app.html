<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="theme-color" content="#0f172a"><title>MPHaven</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;-webkit-font-smoothing:antialiased}html,body{width:100%;height:100%;overflow:hidden;position:fixed;overscroll-behavior:none}body{background:#0f172a;touch-action:pan-y}.container{width:100%;height:100vh;height:100dvh;display:flex;flex-direction:column}.app-wrapper{width:100%;max-width:28rem;height:100%;margin:0 auto;background:rgba(15,23,42,.98);backdrop-filter:blur(40px);display:flex;flex-direction:column;position:relative;border-left:1px solid rgba(30,41,59,.5);border-right:1px solid rgba(30,41,59,.5)}.bg-blur-1,.bg-blur-2{position:absolute;border-radius:50%;filter:blur(140px);pointer-events:none;z-index:0;opacity:.6;transition:opacity 1.5s cubic-bezier(.4,0,.2,1)}.bg-blur-1{top:-5%;left:50%;transform:translateX(-50%);width:22rem;height:22rem;background:rgba(14,116,144,.08)}.bg-blur-2{bottom:-5%;right:-5%;width:18rem;height:18rem;background:rgba(217,119,6,.08)}.warmth-1 .bg-blur-1,.warmth-1 .bg-blur-2{opacity:.2}.warmth-2 .bg-blur-1,.warmth-2 .bg-blur-2{opacity:.3}.warmth-3 .bg-blur-1,.warmth-3 .bg-blur-2{opacity:.4}.main-content{flex:1;overflow-y:auto;overflow-x:hidden;position:relative;z-index:1;-ms-overflow-style:none;scrollbar-width:none;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.main-content::-webkit-scrollbar{display:none}.nav-bar{position:relative;z-index:1000;border-top:1px solid rgba(30,41,59,.5);background:rgba(15,23,42,.98);backdrop-filter:blur(24px);box-shadow:0 -20px 25px -5px rgba(0,0,0,.3);padding:.75rem 0;padding-bottom:calc(.75rem + env(safe-area-inset-bottom))}.nav-container{display:flex;align-items:center;justify-content:space-around;max-width:28rem;margin:0 auto}.nav-btn{position:relative;display:flex;flex-direction:column;align-items:center;gap:.375rem;padding:.5rem 1rem;background:none;border:none;cursor:pointer;transition:all .2s;min-width:80px;-webkit-tap-highlight-color:transparent}.nav-btn:active{opacity:.7}.nav-indicator{position:absolute;top:0;left:50%;transform:translateX(-50%);width:2.5rem;height:3px;background:linear-gradient(to right,#0e7490,#d97706);border-radius:9999px;opacity:0;transition:opacity .2s}.nav-indicator.active{opacity:1}.timer-badge{position:absolute;top:2px;right:2px;width:6px;height:6px;border-radius:50%;background:#d97706;opacity:0;transition:opacity .3s}.timer-badge.active{opacity:1;animation:pulseGlow 1.5s ease-in-out infinite}.nav-icon{width:24px;height:24px;transition:all .2s}.nav-icon.active{color:#fff;stroke-width:2.5}.nav-icon.inactive{color:rgb(100,116,139);stroke-width:2}.nav-label{font-size:.6875rem;font-weight:600;transition:all .2s;white-space:nowrap}.nav-label.active{color:#fff}.nav-label.inactive{color:rgb(100,116,139)}.content-wrapper{padding:1.5rem;padding-bottom:8rem;min-height:100%}@keyframes gentleFadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@keyframes pulseGlow{0%,100%{opacity:1;box-shadow:0 0 8px rgba(217,119,6,.6)}50%{opacity:.7;box-shadow:0 0 4px rgba(217,119,6,.3)}}@keyframes scaleIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fade-in{animation:gentleFadeIn .35s ease-out}.scale-in{animation:scaleIn .3s ease-out}.card{position:relative;overflow:hidden;border-radius:1.5rem;padding:1.5rem;transition:all .3s;box-shadow:0 25px 50px -12px rgba(0,0,0,.25);cursor:pointer;-webkit-tap-highlight-color:transparent}.card:active{transform:scale(.98)}.path-card{background:linear-gradient(135deg,rgba(30,41,59,.8),rgba(15,23,42,.6));border-radius:1.5rem;padding:1.75rem;transition:all .3s}.icon-container{border-radius:1rem;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 15px -3px rgba(0,0,0,.1)}.feeling-emoji{width:2.5rem;height:2.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.25rem;cursor:pointer;transition:all .2s;border:2px solid transparent;background:rgba(255,255,255,.05);-webkit-tap-highlight-color:transparent}.feeling-emoji:active{transform:scale(.95)}.feeling-emoji.selected{border-color:rgba(165,243,252,.5);background:rgba(165,243,252,.1);transform:scale(1.1)}.practice-tabs{display:flex;gap:.5rem;padding:.5rem;background:rgba(30,41,59,.3);border-radius:1rem;margin-bottom:2rem}.practice-tab{flex:1;padding:.75rem 1rem;background:transparent;border:none;border-radius:.75rem;color:rgb(148,163,184);font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent}.practice-tab.active{background:linear-gradient(135deg,rgba(14,116,144,.2),rgba(217,119,6,.1));color:rgb(165,243,252);box-shadow:0 2px 8px rgba(14,116,144,.2)}.practice-tab:active{transform:scale(.97)}.journal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.export-btn{display:flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:rgba(30,41,59,.5);border:1px solid rgba(51,65,85,.5);border-radius:.75rem;color:rgb(165,243,252);font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent}.export-btn:active{background:rgba(30,41,59,.7);transform:scale(.97)}.journal-container{background:linear-gradient(135deg,rgba(14,116,144,.08),rgba(217,119,6,.05));border:1px solid rgba(14,116,144,.2);border-radius:1.25rem;padding:1.5rem;margin-bottom:1.5rem}.selected-prompt-bar{background:rgba(14,116,144,.15);border:1px solid rgba(14,116,144,.3);border-radius:.75rem;padding:.875rem 1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.selected-prompt-text{color:rgb(165,243,252);font-size:.875rem;font-weight:500;flex:1}.clear-prompt-btn{background:none;border:none;color:rgb(148,163,184);font-size:.75rem;cursor:pointer;padding:.25rem .5rem;border-radius:.375rem;transition:all .2s;-webkit-tap-highlight-color:transparent}.clear-prompt-btn:active{background:rgba(30,41,59,.5);color:rgb(203,213,225)}.journal-textarea{width:100%;background:rgba(30,41,59,.5);border:1px solid rgba(51,65,85,.4);border-radius:.75rem;padding:1rem;color:#fff;font-size:1rem;min-height:180px;resize:vertical;font-family:inherit;line-height:1.6;margin-bottom:1rem}.journal-textarea::placeholder{color:rgb(100,116,139)}.journal-textarea:focus{outline:none;border-color:rgba(14,116,144,.5);background:rgba(30,41,59,.7)}.prompts-section{margin-bottom:1rem}.prompts-label{color:rgb(148,163,184);font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.75rem;display:block}.prompts-grid{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}.prompt-chip{display:inline-block;padding:.625rem 1rem;background:rgba(14,116,144,.1);border:1px solid rgba(14,116,144,.3);border-radius:9999px;color:rgb(165,243,252);font-size:.8125rem;cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent}.prompt-chip:active{background:rgba(14,116,144,.2);transform:translateY(-1px)}.save-button{width:100%;padding:1.125rem;border-radius:.75rem;background:linear-gradient(to right,#0e7490,#d97706);color:#fff;font-weight:600;border:none;cursor:pointer;font-size:1rem;transition:all .2s;box-shadow:0 4px 12px rgba(14,116,144,.3);-webkit-tap-highlight-color:transparent}.save-button:active{transform:scale(.98)}.save-button-sticky{position:fixed;bottom:calc(env(safe-area-inset-bottom) + 1rem);left:50%;transform:translateX(-50%);width:calc(100% - 3rem);max-width:25rem;z-index:999;box-shadow:0 8px 32px rgba(14,116,144,.4);animation:slideUpButton .2s ease-out}@keyframes slideUpButton{from{opacity:0;transform:translateX(-50%) translateY(20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}.prompts-toggle{display:flex;align-items:center;justify-content:space-between;width:100%;padding:.75rem 0;background:none;border:none;color:rgb(148,163,184);font-size:.8125rem;font-weight:600;cursor:pointer;margin-bottom:.5rem;-webkit-tap-highlight-color:transparent}.prompts-toggle:active{opacity:.7}.prompts-content{max-height:0;overflow:hidden;opacity:0;transition:all .3s ease}.prompts-content.open{max-height:200px;opacity:1;margin-bottom:.75rem}.backup-section{background:rgba(14,116,144,.05);border:1px solid rgba(14,116,144,.15);border-radius:1rem;padding:1.25rem;margin-top:2rem;display:flex;align-items:center;justify-content:space-between}.backup-info{flex:1}.backup-title{color:rgb(165,243,252);font-size:.875rem;font-weight:600;margin-bottom:.25rem}.backup-desc{color:rgb(148,163,184);font-size:.75rem}.backup-btn{padding:.625rem 1.125rem;background:rgba(14,116,144,.2);border:1px solid rgba(14,116,144,.3);border-radius:.625rem;color:rgb(165,243,252);font-size:.8125rem;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap;-webkit-tap-highlight-color:transparent}.backup-btn:active{background:rgba(14,116,144,.3);transform:scale(.97)}.journal-entry{background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.3);border-radius:1rem;padding:1.25rem;margin-bottom:1rem}.entry-date{color:rgb(148,163,184);font-size:.8125rem;margin-bottom:.75rem}.entry-content{color:rgb(203,213,225);font-size:.9375rem;line-height:1.6;white-space:pre-wrap}.practice-timer{font-family:'SF Mono','Monaco','Cascadia Code',monospace;font-size:4rem;font-weight:700;background:linear-gradient(to right,#0e7490,#d97706);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-align:center;margin:2rem 0}.practice-button{width:100%;padding:1.25rem;border-radius:1rem;font-weight:600;font-size:1.125rem;border:none;cursor:pointer;margin:1rem 0;transition:all .2s;-webkit-tap-highlight-color:transparent}.practice-button:active{transform:scale(.98)}.practice-button-start{background:linear-gradient(to right,#0e7490,#d97706);color:#fff;box-shadow:0 4px 12px rgba(14,116,144,.3)}.practice-button-stop{background:rgba(239,68,68,.2);border:2px solid rgba(239,68,68,.4);color:rgb(252,165,165)}.practice-content{background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.3);border-radius:1rem;padding:1.5rem;margin-top:1rem;color:rgb(203,213,225);text-align:center}.practice-emoji{font-size:3rem;margin:1rem 0;display:block}.practice-affirmation{font-style:italic;color:rgb(148,163,184);margin-top:1rem;padding:1rem;background:rgba(255,255,255,.05);border-radius:.75rem}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.85);backdrop-filter:blur(8px);z-index:9998;display:flex;align-items:center;justify-content:center;padding:1.25rem;opacity:0;animation:fadeIn .2s ease-out forwards}.modal-overlay.closing{pointer-events:none}.modal-content{background:linear-gradient(135deg,rgba(30,41,59,.95),rgba(15,23,42,.95));border:1px solid rgba(14,116,144,.3);border-radius:1.5rem;padding:2rem;max-width:28rem;width:100%;animation:slideUp .3s ease-out}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.post-practice-option{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.4);border-radius:1rem;margin-bottom:1rem;cursor:pointer;transition:all .2s;text-align:left;width:100%;color:inherit;font:inherit;-webkit-tap-highlight-color:transparent}.post-practice-option:active{background:rgba(30,41,59,.6);transform:translateY(-1px)}.option-icon{font-size:2rem;width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;border-radius:.75rem;flex-shrink:0}.option-content{flex:1}.option-title{color:#fff;font-weight:600;font-size:1rem;margin-bottom:.25rem}.option-description{color:rgb(148,163,184);font-size:.875rem}.modal-button{width:100%;padding:1rem;border-radius:.75rem;font-weight:600;border:none;cursor:pointer;font-size:.9375rem;transition:all .2s;margin-top:.75rem;-webkit-tap-highlight-color:transparent}.modal-button:active{transform:scale(.98)}.modal-button-primary{background:linear-gradient(to right,#0e7490,#d97706);color:#fff}.modal-button-secondary{background:transparent;color:rgb(148,163,184);border:1px solid rgb(100,116,139)}.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:rgba(30,41,59,.95);border:1px solid rgba(14,116,144,.3);border-radius:.75rem;padding:1rem 1.5rem;color:#fff;font-weight:600;z-index:10000;opacity:0;transition:all .3s ease;backdrop-filter:blur(10px);box-shadow:0 10px 25px rgba(0,0,0,.3)}.toast.show{transform:translateX(-50%) translateY(0);opacity:1}#settingsBtn{position:fixed;top:1.5rem;right:1.5rem;z-index:100;width:2.5rem;height:2.5rem;border-radius:50%;background:rgba(30,41,59,.8);backdrop-filter:blur(10px);border:1px solid rgba(51,65,85,.5);display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all .2s;box-shadow:0 4px 12px rgba(0,0,0,.3)}#settingsBtn svg{width:1.25rem;height:1.25rem;color:rgb(148,163,184);transition:color .2s}#settingsBtn:hover svg,#settingsBtn:active svg{color:rgb(165,243,252)}@media (min-width:640px){.app-wrapper{border-radius:2.5rem;height:844px}.container{padding:2rem;align-items:center;justify-content:center}}</style></head><body><div class="container"><div class="app-wrapper" id="appWrapper"><div class="bg-blur-1"></div><div class="bg-blur-2"></div><div id="mainContent" class="main-content"></div><div class="nav-bar"><div class="nav-container"><button onclick="switchTab('home')" class="nav-btn" data-tab="home"><div class="nav-indicator active"></div><svg class="nav-icon active" stroke-width="2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg><span class="nav-label active">Home</span></button><button onclick="switchTab('paths')" class="nav-btn" data-tab="paths"><div class="nav-indicator"></div><svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg><span class="nav-label inactive">Paths</span></button><button onclick="switchTab('practice')" class="nav-btn" data-tab="practice"><div class="nav-indicator"></div><div class="timer-badge"></div><svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><span class="nav-label inactive">Practice</span></button><button onclick="switchTab('journal')" class="nav-btn" data-tab="journal"><div class="nav-indicator"></div><svg class="nav-icon inactive" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg><span class="nav-label inactive">Journal</span></button></div></div></div></div><div id="toast" class="toast"></div><script>
const state={currentTab:'home',journalEntries:[],timerRunning:false,timerSeconds:0,currentPractice:'gratitude',currentFeeling:null,lastCheckIn:null,selectedPrompt:null,promptsOpen:false,notificationsEnabled:false,currentModule:null,modulePrompts:[],moduleContext:null};const paths=[{id:'emotional',title:'Understanding Feelings',description:'Learn to recognize and be with your emotions',color:'#0e7490',icon:'M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5',started:true},{id:'mindfulness',title:'Mindfulness',description:'Cultivate awareness of the here and now',color:'#d97706',icon:'M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z',started:false},{id:'connection',title:'Meaningful Relationships',description:'Build deeper connections with others',color:'#dc2626',icon:'M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z',started:false},{id:'purpose',title:'Finding What Matters',description:'Discover what gives your life meaning',color:'#0891b2',icon:'M15 10.5a3 3 0 11-6 0 3 3 0 016 0z M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z',started:false}];let journalPrompts=['What brought you peace today? üïäÔ∏è','What emotion is most present? üí≠','What are you grateful for? üôè','How is your body feeling? üßò'];const practiceContent={gratitude:{instruction:'Take a moment to think of 3 things you\'re grateful for:',steps:['One person in your life','One experience recently','One thing about yourself'],emoji:'üôè',affirmation:'Gratitude turns what we have into enough.'},breathing:{instruction:'Follow this breathing pattern:',steps:['Breathe in for 4 seconds','Hold for 4 seconds','Breathe out for 6 seconds','Repeat 5 times'],emoji:'üå¨Ô∏è',affirmation:'Your breath is always there to bring you back to the present.'},grounding:{instruction:'Notice your surroundings using your senses:',steps:['5 things you can see','4 things you can touch','3 things you can hear','2 things you can smell','1 thing you can taste'],emoji:'üßò',affirmation:'You are here, right now, and that is enough.'}};let timerInterval=null;const PRACTICE_TIME=30;function deleteEntry(id){if(confirm('Delete this entry?')){state.journalEntries=state.journalEntries.filter(e=>e.id!==id);saveState();render();showToast('Entry deleted');}}function createSettingsButton(){const settingsBtn=document.createElement('button');settingsBtn.id='settingsBtn';settingsBtn.innerHTML=`<svg style="width:1.25rem;height:1.25rem;color:rgb(148,163,184);transition:color .2s" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`;settingsBtn.onclick=()=>switchTab('settings');document.body.appendChild(settingsBtn);}function switchTab(tab){if(state.currentTab===tab)return;state.currentTab=tab;const settingsBtn=document.getElementById('settingsBtn');if(settingsBtn){if(tab==='settings'){settingsBtn.innerHTML=`<svg style="width:1.25rem;height:1.25rem;color:rgb(148,163,184)" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>`;settingsBtn.onclick=()=>switchTab('home');}else{settingsBtn.innerHTML=`<svg style="width:1.25rem;height:1.25rem;color:rgb(148,163,184)" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`;settingsBtn.onclick=()=>switchTab('settings');}}document.querySelectorAll('.nav-btn').forEach(btn=>{const indicator=btn.querySelector('.nav-indicator');const icon=btn.querySelector('.nav-icon');const label=btn.querySelector('.nav-label');const isActive=btn.dataset.tab===tab;indicator.classList.toggle('active',isActive);icon.classList.toggle('active',isActive);icon.classList.toggle('inactive',!isActive);if(isActive){icon.setAttribute('stroke-width','2.5');}else{icon.setAttribute('stroke-width','2');}label.classList.toggle('active',isActive);label.classList.toggle('inactive',!isActive);});if(tab==='journal'&&state.currentModule){loadModulePrompts();}render();updateTimerBadge();scrollToTop();}function startPath(id){const path=paths.find(p=>p.id===id);if(path){console.log(`üöÄ Starting: ${path.title} (${id})`);path.started=true;updateWarmth();saveState();state.currentModule=id;if(id==='mindfulness'){state.modulePrompts=['What did you notice during your mindfulness practice? üå±','How did your body feel while being present? üßò','What thoughts kept coming back? üí≠','How can you bring this awareness into your day? ‚ú®'];}else if(id==='emotional'){state.modulePrompts=['What emotion felt strongest today? üåä','Where did you feel it in your body? üèÉ‚Äç‚ôÇÔ∏è','What triggered this feeling? üîç','How did you respond to it? ü§î'];}else if(id==='connection'){state.modulePrompts=['Who did you connect with today? üë•','What made that interaction meaningful? ‚ù§Ô∏è','How did you show care for someone? ü§ó','What connection do you want to deepen? üåü'];}else if(id==='purpose'){state.modulePrompts=['What felt meaningful today? ‚ú®','When did you feel most alive? üåû','What values guided your actions today? üß≠','What gives your life purpose right now? üåà'];}localStorage.setItem('modulePrompts',JSON.stringify(state.modulePrompts));localStorage.setItem('currentModule',id);showToast(`Opening ${path.title}... üöÄ`);setTimeout(()=>{if(id==='mindfulness'){navigateToModule('mindfulness');}else{showToast(`${path.title} course coming soon! ‚ú®`);path.started=false;updateWarmth();saveState();}},800);}}function navigateToModule(moduleId){state.currentModule=moduleId;showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:3rem;margin-bottom:1rem">${moduleId==='mindfulness'?'üßò':'üìö'}</div><h2 style="color:white;font-size:1.5rem;font-weight:700;margin-bottom:.5rem">${moduleId==='mindfulness'?'Mindfulness Module':paths.find(p=>p.id===moduleId)?.title||'Module'}</h2><p style="color:rgb(148,163,184);font-size:.9375rem;margin-bottom:1.5rem">${moduleId==='mindfulness'?'Learn to cultivate present-moment awareness. Start with a 5-minute guided practice.':'Explore this learning path through guided exercises and reflections.'}</p><div style="display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem"><button onclick="startModulePractice('${moduleId}')" class="post-practice-option"><div class="option-icon" style="background:rgba(14,116,144,.2);color:rgb(165,243,252)">üéß</div><div class="option-content"><div class="option-title">Start Guided Practice</div><div class="option-description">${moduleId==='mindfulness'?'5-minute mindfulness session':'Begin the first exercise'}</div></div></button><button onclick="switchTab('practice'); closeModal(); showToast('Practice ready! Try mindfulness techniques üßò')" class="post-practice-option"><div class="option-icon" style="background:rgba(217,119,6,.2);color:rgb(253,230,138)">‚è±Ô∏è</div><div class="option-content"><div class="option-title">Try Practice Timer</div><div class="option-description">Use the ${moduleId==='mindfulness'?'mindfulness':'guided'} techniques</div></div></button><button onclick="goToModuleJournal('${moduleId}')" class="post-practice-option"><div class="option-icon" style="background:rgba(34,197,94,.2);color:rgb(134,239,172)">üìù</div><div class="option-content"><div class="option-title">Journal About This</div><div class="option-description">Reflect on what you're learning</div></div></button></div><button onclick="closeModal()" class="modal-button modal-button-secondary">Maybe Later</button></div>`);}function startModulePractice(moduleId){closeModal();setTimeout(() => {if(moduleId==='mindfulness'){state.currentPractice='grounding';}switchTab('practice');showToast('Starting practice üßò');}, 100);}function goToModuleJournal(moduleId){closeModal();setTimeout(() => {loadModulePrompts();if(moduleId==='mindfulness'){state.selectedPrompt='What did you notice during your mindfulness practice? üå±';}else if(moduleId==='emotional'){state.selectedPrompt='What emotion felt strongest today? üåä';}else if(moduleId==='connection'){state.selectedPrompt='Who did you connect with today? üë•';}else if(moduleId==='purpose'){state.selectedPrompt='What felt meaningful today? ‚ú®';}switchTab('journal');showToast('Ready to reflect on your learning üìù');}, 100);}function loadModulePrompts(){const prompts=localStorage.getItem('modulePrompts');const currentModule=localStorage.getItem('currentModule');if(prompts&&currentModule){try{const parsed=JSON.parse(prompts);if(Array.isArray(parsed)&&parsed.length>0){journalPrompts=[...parsed,...journalPrompts];state.currentModule=currentModule;localStorage.removeItem('modulePrompts');}}catch(e){console.error('Failed to load prompts:',e);}}}function getIcon(path,strokeWidth='2'){return`<svg class="w-full h-full" stroke-width="${strokeWidth}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="${path}"/></svg>`;}function scrollToTop(){const content=document.getElementById('mainContent');if(content)content.scrollTo({top:0,behavior:'instant'});}function shouldShowCheckIn(){return state.lastCheckIn!==new Date().toDateString();}function handleFeelingSelect(feeling){state.currentFeeling=feeling;state.lastCheckIn=new Date().toDateString();saveState();document.querySelectorAll('.feeling-emoji').forEach(emoji=>emoji.classList.toggle('selected',emoji.dataset.feeling===feeling));setTimeout(()=>render(),600);}function updateWarmth(){const wrapper=document.getElementById('appWrapper');const started=paths.filter(p=>p.started).length;wrapper.className=started>=3?'app-wrapper warmth-3':started>=2?'app-wrapper warmth-2':started>=1?'app-wrapper warmth-1':'app-wrapper';}function updateTimerBadge(){document.querySelectorAll('.timer-badge').forEach(badge=>badge.classList.toggle('active',state.timerRunning));}function selectPrompt(prompt){state.selectedPrompt=prompt;render();setTimeout(()=>{const textarea=document.getElementById('newEntryText');if(textarea){textarea.focus();scrollToTop();}},100);}function clearSelectedPrompt(){state.selectedPrompt=null;render();}function saveJournalEntry(){const textarea=document.getElementById('newEntryText');if(!textarea)return;const text=textarea.value.trim();if(!text)return showToast('Write something first ‚úçÔ∏è');state.journalEntries.unshift({id:Date.now(),date:new Date().toISOString(),content:text,prompt:state.selectedPrompt,module:state.currentModule});saveState();textarea.value='';state.selectedPrompt=null;render();showToast('Entry saved ‚ú®');if(state.currentModule){setTimeout(()=>{showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:3rem;margin-bottom:1rem">‚ú®</div><h2 style="color:white;font-size:1.5rem;font-weight:700;margin-bottom:.5rem">Reflection Saved!</h2><p style="color:rgb(148,163,184);font-size:.9375rem;margin-bottom:1.5rem">Your thoughts on ${paths.find(p=>p.id===state.currentModule)?.title||'the module'} are recorded.</p><button onclick="navigateToModule('${state.currentModule}'); closeModal()" class="modal-button modal-button-primary">Return to Module</button><button onclick="closeModal()" class="modal-button modal-button-secondary">Continue Journaling</button></div>`);},500);}}function switchPractice(type){state.currentPractice=type;render();const emoji=practiceContent[type].emoji;showToast(`Switched to ${type} ${emoji}`);}function startTimer(){if(state.timerRunning)return;state.timerRunning=true;state.timerSeconds=0;updateTimerBadge();timerInterval=setInterval(()=>{state.timerSeconds++;updateTimerUI();if(state.timerSeconds>=PRACTICE_TIME){stopTimer();}},1000);render();showToast('Practice started üå±');}function stopTimer(){state.timerRunning=false;clearInterval(timerInterval);updateTimerBadge();render();setTimeout(()=>showPostPracticeModal(),500);}function showPostPracticeModal(){showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:3rem;margin-bottom:1rem">‚ú®</div><h2 style="color:white;font-size:1.5rem;font-weight:700;margin-bottom:.5rem">Practice Complete!</h2><p style="color:rgb(148,163,184);font-size:.9375rem;margin-bottom:1.5rem">You practiced for ${PRACTICE_TIME} seconds</p><div style="display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem"><button onclick="journalAfterPractice()" class="post-practice-option"><div class="option-icon" style="background:rgba(14,116,144,.2);color:rgb(165,243,252)">üìù</div><div class="option-content"><div class="option-title">Journal About It</div><div class="option-description">Capture what you noticed</div></div></button><button onclick="practiceAgain()" class="post-practice-option"><div class="option-icon" style="background:rgba(217,119,6,.2);color:rgb(253,230,138)">üîÑ</div><div class="option-content"><div class="option-title">Practice Again</div><div class="option-description">Build consistency</div></div></button><button onclick="learnMoreSkills()" class="post-practice-option"><div class="option-icon" style="background:rgba(34,197,94,.2);color:rgb(134,239,172)">üìö</div><div class="option-content"><div class="option-title">Learn More Skills</div><div class="option-description">Explore another technique</div></div></button></div></div>`);}function journalAfterPractice(){closeModal();state.selectedPrompt=`How did the ${state.currentPractice} practice feel?`;setTimeout(() => {switchTab('journal');showToast('Ready to reflect üìù');}, 150);}function practiceAgain(){closeModal();setTimeout(() => {state.timerSeconds=0;updateTimerUI();startTimer();}, 150);}function learnMoreSkills(){closeModal();setTimeout(() => {switchTab('paths');showToast('Explore new skills üìö');}, 150);}function updateTimerUI(){const display=document.getElementById('timerDisplay');if(display){const mins=Math.floor(state.timerSeconds/60);const secs=state.timerSeconds%60;display.textContent=`${mins}:${secs.toString().padStart(2,'0')}`;}}function showToast(message){const toast=document.getElementById('toast');toast.textContent=message;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),3000);}function showModal(content){const overlay=document.createElement('div');overlay.className='modal-overlay';overlay.innerHTML=`<div class="modal-content">${content}</div>`;overlay.onclick=(e)=>{if(e.target===overlay){closeModal();}};document.body.appendChild(overlay);}function closeModal(){const modal=document.querySelector('.modal-overlay');if(modal){modal.classList.add('closing');modal.style.pointerEvents='none';setTimeout(()=>{if(modal.parentNode){modal.parentNode.removeChild(modal);}},100);}}function saveState(){localStorage.setItem('mphaven_state',JSON.stringify(state));localStorage.setItem('mphaven_paths',JSON.stringify(paths));}function loadState(){const saved=localStorage.getItem('mphaven_state');if(saved)Object.assign(state,JSON.parse(saved));const savedPaths=localStorage.getItem('mphaven_paths');if(savedPaths){const parsed=JSON.parse(savedPaths);parsed.forEach((p,i)=>paths[i].started=p.started);}}function handleLogout(){if(confirm('Are you sure you want to clear all your data? This cannot be undone.')){localStorage.clear();location.reload();}}function exportJournal(){if(state.journalEntries.length===0){return showToast('No entries to export');}const data={entries:state.journalEntries,exportDate:new Date().toISOString()};const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`mphaven-journal-${new Date().toISOString().split('T')[0]}.json`;document.body.appendChild(a);a.click();setTimeout(()=>{document.body.removeChild(a);URL.revokeObjectURL(url);},100);showToast('Journal exported ‚úÖ');}function toggleNotifications(){state.notificationsEnabled=!state.notificationsEnabled;saveState();if(state.notificationsEnabled){showToast('Notifications enabled üîî');}else{showToast('Notifications disabled üîï');}render();}function togglePrompts(){state.promptsOpen=!state.promptsOpen;render();}function showPrivacyInfo(){const hasEntries=state.journalEntries.length>0;showModal(`<div style="text-align:center" class="scale-in"><div style="font-size:3rem;margin-bottom:1rem">üîí</div><h2 style="color:white;font-size:1.5rem;font-weight:700;margin-bottom:.75rem">Your Privacy Matters</h2><p style="color:rgb(203,213,225);font-size:.9375rem;margin-bottom:1.5rem;line-height:1.6">All your reflections are stored locally on your device. Nothing is ever uploaded to the cloud or shared with anyone.</p>${hasEntries?`<div style="background:rgba(14,116,144,.1);border:1px solid rgba(14,116,144,.3);border-radius:1rem;padding:1.25rem;margin-bottom:1.5rem;text-align:left"><p style="color:rgb(165,243,252);font-size:.875rem;font-weight:600;margin-bottom:.5rem">üí° Getting a new phone?</p><p style="color:rgb(203,213,225);font-size:.8125rem;line-height:1.5">Download a backup of your journal to transfer it to your new device.</p></div><button onclick="exportJournal();closeModal()" class="modal-button modal-button-primary">Download Backup</button><button onclick="closeModal()" class="modal-button modal-button-secondary">No Need Right Now</button>`:`<button onclick="closeModal()" class="modal-button modal-button-primary">Got It</button>`}</div>`);}function renderHome(){const showCheckIn=shouldShowCheckIn();const feelings=['üòå','üòî','üòä','üò∞','üò¥','üòê'];const feelingLabels=['Calm','Heavy','Joyful','Anxious','Tired','Neutral'];const continuePath=paths.find(p=>p.started);return`<div class="content-wrapper fade-in">${showCheckIn?`<div style="padding:1.75rem;background:linear-gradient(135deg,rgba(14,116,144,.15),rgba(217,119,6,.1));border:1px solid rgba(14,116,144,.3);border-radius:1.5rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25);margin-bottom:2rem"><h3 style="color:white;font-size:1.125rem;font-weight:700;margin-bottom:1rem;text-align:center">How are you feeling?</h3><p style="color:rgb(203,213,225);font-size:.875rem;text-align:center;margin-bottom:1.5rem">Take a moment to check in</p><div style="display:flex;justify-content:center;gap:.75rem;margin-bottom:1.5rem;flex-wrap:wrap">${feelings.map((emoji,i)=>`<button onclick="handleFeelingSelect('${feelingLabels[i].toLowerCase()}')" class="feeling-emoji" data-feeling="${feelingLabels[i].toLowerCase()}">${emoji}</button>`).join('')}</div><p style="color:rgb(100,116,139);font-size:.75rem;text-align:center;font-style:italic">Just for you. Not tracked.</p></div>`:''}<div style="margin-bottom:2rem"><h1 style="color:white;font-size:3rem;font-weight:700;margin-bottom:1rem;line-height:1.2">Welcome<br/>back</h1><p style="color:rgb(203,213,225);font-size:1.125rem;line-height:1.6">Your sanctuary is here.</p></div>${continuePath?`<div style="margin-bottom:2rem"><h2 style="color:rgb(148,163,184);font-size:.75rem;font-weight:700;margin-bottom:1.25rem;text-transform:uppercase;letter-spacing:0.1em">Continue</h2><button onclick="startPath('${continuePath.id}')" class="card" style="padding:1.75rem;background:linear-gradient(135deg,${continuePath.color}25,${continuePath.color}15);border:2px solid ${continuePath.color}50;text-align:left"><div style="display:flex;align-items:center;gap:1.25rem"><div class="icon-container" style="width:4rem;height:4rem;background:${continuePath.color}"><div style="width:2rem;height:2rem;color:white">${getIcon(continuePath.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.25rem;font-weight:700;margin-bottom:.5rem">${continuePath.title}</h3><p style="color:rgb(203,213,225);font-size:.875rem">${continuePath.description}</p></div><div style="width:3rem;height:3rem;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(14,116,144,.3)"><svg style="width:1.5rem;height:1.5rem;color:rgb(165,243,252)" stroke-width="2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div></div></button></div>`:''}<div><h2 style="color:rgb(148,163,184);font-size:.75rem;font-weight:700;margin-bottom:1.25rem;text-transform:uppercase;letter-spacing:0.1em">Explore</h2><div style="display:flex;flex-direction:column;gap:1rem">${paths.filter(p=>!p.started).slice(0,2).map(path=>`<button onclick="startPath('${path.id}')" class="card" style="background:linear-gradient(135deg,${path.color}15,${path.color}08);border:1px solid ${path.color}30;text-align:left"><div style="display:flex;align-items:center;gap:1rem"><div class="icon-container" style="width:3.5rem;height:3.5rem;background:${path.color}"><div style="width:1.75rem;height:1.75rem;color:white">${getIcon(path.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.125rem;font-weight:700;margin-bottom:.25rem">${path.title}</h3><p style="color:rgb(148,163,184);font-size:.875rem">${path.description}</p></div><svg style="width:1.25rem;height:1.25rem;color:rgb(100,116,139)" stroke-width="2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div></button>`).join('')}</div><button onclick="switchTab('paths')" style="width:100%;margin-top:1.5rem;padding:1.25rem;background:rgba(30,41,59,.5);border:1px solid rgba(51,65,85,.5);border-radius:1rem;color:white;font-weight:700;font-size:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent" class="card">View all paths</button></div></div>`;}function renderPaths(){return`<div class="content-wrapper fade-in"><div style="margin-bottom:2rem"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:.5rem">Your Paths</h2><p style="color:rgb(148,163,184);font-size:1rem">Choose what speaks to you</p></div><div style="display:flex;flex-direction:column;gap:1rem">${paths.map(path=>`<button onclick="startPath('${path.id}')" class="path-card" style="border:1px solid ${path.color}40;background:linear-gradient(135deg,${path.color}20,${path.color}10);text-align:left"><div style="display:flex;align-items:center;gap:1.25rem"><div class="icon-container" style="width:4rem;height:4rem;background:${path.color}"><div style="width:2rem;height:2rem;color:white">${getIcon(path.icon,'2')}</div></div><div style="flex:1"><h3 style="color:white;font-size:1.25rem;font-weight:700;margin-bottom:.5rem">${path.title}</h3><p style="color:rgb(203,213,225);font-size:.875rem">${path.description}</p></div><div style="padding:.5rem .75rem;border-radius:.75rem;background:${path.color}40;color:white;font-size:.75rem;font-weight:600">${path.started?'Continue':'Begin'}</div></div></button>`).join('')}</div></div>`;}function renderPractice(){const content=practiceContent[state.currentPractice];return`<div class="content-wrapper fade-in"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:.5rem">Practice</h2><p style="color:rgb(148,163,184);font-size:1rem;margin-bottom:2rem">Build wellness habits</p><div class="practice-tabs"><button onclick="switchPractice('gratitude')" class="practice-tab ${state.currentPractice==='gratitude'?'active':''}">üôè Gratitude</button><button onclick="switchPractice('breathing')" class="practice-tab ${state.currentPractice==='breathing'?'active':''}">üå¨Ô∏è Breathing</button><button onclick="switchPractice('grounding')" class="practice-tab ${state.currentPractice==='grounding'?'active':''}">üßò Grounding</button></div><div style="text-align:center;padding:2rem 1.5rem;background:linear-gradient(135deg,rgba(14,116,144,.08),rgba(217,119,6,.08));border:1px solid rgba(14,116,144,.3);border-radius:1.5rem;margin-bottom:1.5rem"><div id="timerDisplay" class="practice-timer">0:00</div>${state.timerRunning?`<button onclick="stopTimer()" class="practice-button practice-button-stop">‚èπÔ∏è Stop Practice</button>`:`<button onclick="startTimer()" class="practice-button practice-button-start">Start ${PRACTICE_TIME}-Second Practice</button>`}<p style="color:rgb(203,213,225);font-size:.875rem;margin-top:1rem">Find a quiet space</p></div><div class="practice-content"><div style="margin-bottom:1rem;font-weight:500;color:white">${content.instruction}</div>${content.steps.map(step=>`<div style="margin-bottom:.75rem;color:rgb(203,213,225)">${step}</div>`).join('')}<div class="practice-emoji">${content.emoji}</div><div class="practice-affirmation">${content.affirmation}</div></div></div>`;}function renderJournal(){loadModulePrompts();return`<div class="content-wrapper fade-in"><div style="margin-bottom:1rem"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:.25rem">Journal</h2><p style="color:rgb(148,163,184);font-size:.875rem">${state.journalEntries.length} reflections</p></div><div class="journal-container">${state.selectedPrompt?`<div class="selected-prompt-bar"><span class="selected-prompt-text">${state.selectedPrompt}</span><button onclick="clearSelectedPrompt()" class="clear-prompt-btn">Clear</button></div>`:''}<textarea id="newEntryText" class="journal-textarea" placeholder="What's alive in your experience right now?..."></textarea><button onclick="togglePrompts()" class="prompts-toggle"><span>‚ú® Quick Prompts</span><svg style="width:1rem;height:1rem;transition:transform .2s;transform:rotate(${state.promptsOpen?'180deg':'0deg'})" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></button><div class="prompts-content ${state.promptsOpen?'open':''}"><div class="prompts-grid">${journalPrompts.map(prompt=>`<button onclick="selectPrompt('${prompt.replace(/'/g,"\\'")}')" class="prompt-chip">${prompt}</button>`).join('')}</div></div><button onclick="saveJournalEntry()" class="save-button">Save Reflection</button></div>${state.journalEntries.length>0?`<h3 style="color:rgb(148,163,184);font-size:.75rem;font-weight:700;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.1em;margin-top:2rem">Past Reflections</h3>${state.journalEntries.map(entry=>{const date=new Date(entry.date);const formatted=date.toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});return`<div class="journal-entry" data-entry-id="${entry.id}"><div class="entry-date">${formatted}</div>${entry.prompt?`<div style="color:rgb(148,163,184);font-size:.75rem;font-style:italic;margin-bottom:.5rem">${entry.prompt}</div>`:''}${entry.module?`<div style="color:rgb(165,243,252);font-size:.75rem;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem"><svg style="width:.75rem;height:.75rem" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>${paths.find(p=>p.id===entry.module)?.title||'Module'}</div>`:''}<div class="entry-content">${entry.content}</div><div style="margin-top:.75rem;text-align:right"><button onclick="deleteEntry(${entry.id})" style="background:rgba(239,68,68,.2);border:1px solid rgba(239,68,68,.4);color:rgb(252,165,165);font-size:.75rem;cursor:pointer;padding:.5rem 1rem;border-radius:.5rem;-webkit-tap-highlight-color:transparent;transition:all .2s;font-weight:600">Delete</button></div></div>`;}).join('')}<button onclick="showPrivacyInfo()" style="width:100%;margin-top:2rem;padding:1rem;background:rgba(14,116,144,.05);border:1px solid rgba(14,116,144,.15);border-radius:.75rem;display:flex;align-items:center;gap:.75rem;cursor:pointer;-webkit-tap-highlight-color:transparent;text-align:left"><svg style="width:1.25rem;height:1.25rem;color:rgb(165,243,252);flex-shrink:0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg><div style="flex:1"><div style="color:rgb(165,243,252);font-size:.8125rem;font-weight:600">Your reflections are private & secure</div><div style="color:rgb(148,163,184);font-size:.75rem">Saved locally on your device only</div></div><svg style="width:1rem;height:1rem;color:rgb(148,163,184);flex-shrink:0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></button>`:`<div style="text-align:center;padding:3rem 1rem;margin-top:2rem"><div style="font-size:3rem;margin-bottom:1rem;opacity:.4">üìì</div><p style="color:white;font-size:1rem;font-weight:600;margin-bottom:.5rem">Your wellness journey begins here</p><p style="color:rgb(148,163,184);font-size:.875rem;margin-bottom:1.5rem">Start with a reflection or explore a learning path</p><button onclick="switchTab('paths')" style="padding:.875rem 1.5rem;border-radius:.75rem;background:linear-gradient(to right,#0e7490,#d97706);color:white;font-weight:600;border:none;cursor:pointer;-webkit-tap-highlight-color:transparent">Explore Paths</button></div>`}</div>`;}function renderSettings(){const hasEntries=state.journalEntries.length>0;return`<div class="content-wrapper fade-in"><div style="margin-bottom:2rem"><h2 style="color:white;font-size:2.5rem;font-weight:700;margin-bottom:.5rem">Settings</h2><p style="color:rgb(148,163,184);font-size:1rem">Manage your preferences</p></div><div style="background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.4);border-radius:1rem;padding:1.25rem;margin-bottom:1rem"><div style="display:flex;align-items:center;justify-content:space-between"><div style="flex:1"><div style="color:white;font-weight:600;font-size:.9375rem;margin-bottom:.25rem">Practice Reminders</div><div style="color:rgb(148,163,184);font-size:.8125rem">Get daily reminders to practice</div></div><button onclick="toggleNotifications()" style="width:3rem;height:1.75rem;border-radius:9999px;border:none;cursor:pointer;transition:background .2s;background:${state.notificationsEnabled?'linear-gradient(to right,#0e7490,#d97706)':'rgba(51,65,85,.5)'};position:relative;-webkit-tap-highlight-color:transparent"><div style="width:1.25rem;height:1.25rem;border-radius:50%;background:white;position:absolute;top:.25rem;transition:left .2s;left:${state.notificationsEnabled?'1.5rem':'.25rem'}"></div></button></div></div><button onclick="showPrivacyInfo()" style="width:100%;padding:1.25rem;background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.4);border-radius:1rem;display:flex;align-items:center;gap:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent;text-align:left;margin-bottom:1rem"><div style="width:2.5rem;height:2.5rem;border-radius:.625rem;background:rgba(14,116,144,.2);display:flex;align-items:center;justify-content:center;flex-shrink:0"><svg style="width:1.25rem;height:1.25rem;color:rgb(165,243,252)" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg></div><div style="flex:1"><div style="color:white;font-weight:600;font-size:.9375rem;margin-bottom:.25rem">Privacy & Data</div><div style="color:rgb(148,163,184);font-size:.8125rem">Everything stays on your device</div></div><svg style="width:1rem;height:1rem;color:rgb(148,163,184);flex-shrink:0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></button>${hasEntries?`<button onclick="exportJournal()" style="width:100%;padding:1.25rem;background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.4);border-radius:1rem;display:flex;align-items:center;gap:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent;text-align:left;margin-bottom:1rem"><div style="width:2.5rem;height:2.5rem;border-radius:.625rem;background:rgba(217,119,6,.2);display:flex;align-items:center;justify-content:center;flex-shrink:0"><svg style="width:1.25rem;height:1.25rem;color:rgb(253,230,138)" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg></div><div style="flex:1"><div style="color:white;font-weight:600;font-size:.9375rem;margin-bottom:.25rem">Export Journal</div><div style="color:rgb(148,163,184);font-size:.8125rem">Download backup of your entries</div></div><svg style="width:1rem;height:1rem;color:rgb(148,163,184);flex-shrink:0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></button>`:''}<button onclick="switchTab('paths')" style="width:100%;padding:1.25rem;background:rgba(30,41,59,.4);border:1px solid rgba(51,65,85,.4);border-radius:1rem;display:flex;align-items:center;gap:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent;text-align:left;margin-bottom:1rem"><div style="width:2.5rem;height:2.5rem;border-radius:.625rem;background:rgba(14,116,144,.2);display:flex;align-items:center;justify-content:center;flex-shrink:0"><svg style="width:1.25rem;height:1.25rem;color:rgb(165,243,252)" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg></div><div style="flex:1"><div style="color:white;font-weight:600;font-size:.9375rem;margin-bottom:.25rem">Learning Paths</div><div style="color:rgb(148,163,184);font-size:.8125rem">Explore wellness courses</div></div><svg style="width:1rem;height:1rem;color:rgb(148,163,184);flex-shrink:0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></button><div style="margin-top:3rem;padding-top:2rem;border-top:1px solid rgba(239,68,68,.2)"><h3 style="color:rgb(252,165,165);font-size:.75rem;font-weight:700;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.1em">Danger Zone</h3><button onclick="handleLogout()" style="width:100%;padding:1.25rem;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);border-radius:1rem;display:flex;align-items:center;gap:1rem;cursor:pointer;-webkit-tap-highlight-color:transparent;text-align:left"><div style="width:2.5rem;height:2.5rem;border-radius:.625rem;background:rgba(239,68,68,.2);display:flex;align-items:center;justify-content:center;flex-shrink:0"><svg style="width:1.25rem;height:1.25rem;color:rgb(252,165,165)" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg></div><div style="flex:1"><div style="color:rgb(252,165,165);font-weight:600;font-size:.9375rem;margin-bottom:.25rem">Clear All Data & Logout</div><div style="color:rgb(148,163,184);font-size:.8125rem">Delete all journal entries and reset app</div></div></button></div><div style="text-align:center;margin-top:3rem;padding:2rem"><p style="color:rgb(100,116,139);font-size:.75rem">MPHaven v1.0</p><p style="color:rgb(71,85,105);font-size:.6875rem;margin-top:.25rem">Your mental wellness companion</p></div></div>`;}function render(){const content=document.getElementById('mainContent');switch(state.currentTab){case 'home':content.innerHTML=renderHome();break;case 'paths':content.innerHTML=renderPaths();break;case 'practice':content.innerHTML=renderPractice();updateTimerUI();break;case 'journal':content.innerHTML=renderJournal();break;case 'settings':content.innerHTML=renderSettings();break;}}createSettingsButton();loadState();updateWarmth();const urlParams=new URLSearchParams(window.location.search);const tab=urlParams.get('tab');if(tab&&['home','paths','practice','journal','settings'].includes(tab)){state.currentTab=tab;}render();updateTimerBadge();window.addEventListener('beforeunload',saveState);
</script></body></html>
