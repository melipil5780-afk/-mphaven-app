<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f172a">
    <title>Just The Facts - MPHaven</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Simple, working colors */
        :root {
            --bg-dark: #0f172a;
            --bg-card: rgba(15, 23, 42, 0.98);
            --border-subtle: rgba(30, 41, 59, 0.5);
            --primary-teal: #0e7490;
            --accent-amber: #d97706;
            --drama-red: #dc2626;
            --text-primary: rgb(241, 245, 249);
            --text-secondary: rgb(203, 213, 225);
            --text-muted: rgb(148, 163, 184);
            --text-teal: rgb(94, 234, 212);
            --text-amber: rgb(251, 191, 36);
            --success-emerald: rgb(74, 222, 128);
            --gradient-main: linear-gradient(135deg, #0e7490, #d97706);
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--bg-dark);
            color: var(--text-primary);
        }
        
        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-wrapper {
            width: 100%;
            max-width: 28rem;
            height: 100%;
            margin: 0 auto;
            background: var(--bg-card);
            display: flex;
            flex-direction: column;
        }
        
        .bg-blur-1, .bg-blur-2 {
            position: absolute;
            border-radius: 50%;
            filter: blur(140px);
            pointer-events: none;
            z-index: 0;
            opacity: 0.6;
        }
        
        .bg-blur-1 {
            top: -5%; left: 50%;
            transform: translateX(-50%);
            width: 22rem; height: 22rem;
            background: rgba(14, 116, 144, 0.08);
        }
        
        .bg-blur-2 {
            bottom: -5%; right: -5%;
            width: 18rem; height: 18rem;
            background: rgba(217, 119, 6, 0.08);
        }
        
        .main-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            position: relative;
            z-index: 1;
        }
        
        .main-content::-webkit-scrollbar {
            display: none;
        }
        
        .content-wrapper {
            padding: 1rem 1.25rem 2rem;
        }
        
        .card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.65), rgba(15, 23, 42, 0.45));
            border: 1px solid rgba(51, 65, 85, 0.4);
            border-radius: 1.25rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .skill-header {
            background: var(--gradient-main);
        }
        
        .btn {
            color: white;
            font-weight: 600;
            border: none;
            padding: 1rem;
            border-radius: 1rem;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: var(--gradient-main);
            box-shadow: 0 4px 16px rgba(14, 116, 144, 0.2);
        }
        
        .btn-primary:hover {
            opacity: 0.92;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .progress-dots {
            display: flex;
            gap: 0.25rem;
        }
        
        .progress-dot {
            flex: 1;
            height: 0.5rem;
            background: rgba(148, 163, 184, 0.25);
            border-radius: 9999px;
        }
        
        .progress-dot.active {
            background: var(--gradient-main);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .step-transition {
            animation: fadeIn 0.4s ease-out;
        }
        
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(51, 65, 85, 0.4);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checkbox-label:hover {
            border-color: rgba(14, 116, 144, 0.5);
            background: rgba(14, 116, 144, 0.12);
        }
        
        .checkbox-label.checked {
            border-color: rgba(14, 116, 144, 0.6);
            background: rgba(14, 116, 144, 0.18);
        }
        
        input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
            accent-color: var(--primary-teal);
        }
        
        textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: 1px solid rgba(51, 65, 85, 0.4);
            background: rgba(30, 41, 59, 0.5);
            color: white;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary-teal);
            cursor: pointer;
        }
        
        .char-counter {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-align: right;
            margin-top: 0.5rem;
        }
        
        .char-counter.active {
            color: var(--text-teal);
            font-weight: 600;
        }
        
        .feedback-toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(14, 116, 144, 0.95);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .feedback-toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        .hidden { display: none !important; }
        
        .relief-emoji {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-wrapper">
            <div class="bg-blur-1"></div>
            <div class="bg-blur-2"></div>

            <div class="main-content">
                <div class="content-wrapper" id="content"></div>
            </div>
        </div>
    </div>

    <div id="feedbackToast" class="feedback-toast"></div>

    <script>
        // Global State
        let userInput = {
            dramaStory: "",
            factStory: "",
            relief: 5,
            diffWord: "",
            dramaWords: []
        };

        let step = 1;
        const TOTAL_STEPS = 7;
        
        const steps = {
            1: 'The Drama Multiplier',
            2: 'Your Blockbuster Drama', 
            3: 'Soap Opera vs News Report',
            4: 'The Reporter Handbook',
            5: 'Write Your News Report',
            6: 'Drama Detector',
            7: 'Your Press Pass'
        };
        
        function autoSave() {
            localStorage.setItem('factsModuleProgress', JSON.stringify({
                step,
                userInput,
                timestamp: Date.now()
            }));
        }
        
        function loadProgress() {
            const saved = localStorage.getItem('factsModuleProgress');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    const hoursSince = (Date.now() - data.timestamp) / (1000 * 60 * 60);
                    
                    if (hoursSince < 24) {
                        if (confirm('Resume where you left off?')) {
                            step = data.step;
                            Object.assign(userInput, data.userInput);
                            return true;
                        }
                    }
                } catch (e) {}
            }
            return false;
        }
        
        function showFeedback(message, duration = 2000) {
            const toast = document.getElementById('feedbackToast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }
        
        function renderHeader() {
            return `
                <div class="card" style="padding:1rem; margin-bottom:1rem">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.75rem">
                        <button onclick="goBack()" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer; padding:0.25rem">‚Üê</button>
                        <h1 style="font-weight:600; font-size:1.125rem">${steps[step]}</h1>
                        <div style="color:var(--text-muted); font-size:0.875rem">${step}/${TOTAL_STEPS}</div>
                    </div>
                    <div class="progress-dots">
                        ${Array(TOTAL_STEPS).fill().map((_, i) => 
                            `<div class="progress-dot ${i < step ? 'active' : ''}"></div>`
                        ).join('')}
                    </div>
                </div>
            `;
        }
        
        function goBack() {
            if (step > 1) {
                step--;
                render();
            } else {
                window.history.back();
            }
        }
        
        function saveInput(id, key) {
            const el = document.getElementById(id);
            if (el) {
                const value = el.value.trim();
                userInput[key] = value || userInput[key];
            }
        }
        
        function canProceed() {
            if (step === 2) {
                return userInput.dramaStory.length >= 20;
            }
            if (step === 5) {
                return userInput.factStory.length >= 10;
            }
            return true;
        }
        
        function updateButtonState() {
            const btns = document.querySelectorAll('.btn-primary');
            btns.forEach(btn => {
                btn.disabled = !canProceed();
            });
        }
        
        function nextStep() {
            if (step === 2) {
                saveInput('dramaText', 'dramaStory');
                const checkboxes = document.querySelectorAll('.checkbox-label.checked');
                userInput.dramaWords = Array.from(checkboxes).map(label => 
                    label.querySelector('span').textContent
                );
            }
            if (step === 5) {
                saveInput('factsText', 'factStory');
                saveInput('differenceWord', 'diffWord');
                const reliefEl = document.getElementById('reliefRating');
                if (reliefEl) userInput.relief = reliefEl.value;
            }

            autoSave();

            if (step < TOTAL_STEPS) {
                step++;
                render();
                document.querySelector('.main-content').scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        function renderStep1() {
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    <div class="card skill-header" style="padding:2rem; text-align:center; margin-bottom:1rem">
                        <div style="font-size:4rem; margin-bottom:1rem">üßÆ</div>
                        <h2 style="color:white; font-size:1.75rem; font-weight:700; margin-bottom:1.5rem">The Drama Multiplier</h2>
                        
                        <div style="font-family:monospace; font-size:1.5rem; padding:1rem; background:rgba(30,41,59,0.5); border-radius:1rem; margin:1rem 0">
                            What Happened<br>
                            <span style="font-size:2rem; color:var(--text-teal)">+</span><br>
                            Your Story<br>
                            <span style="font-size:2rem; color:#fca5a5">=</span><br>
                            <span style="background:rgba(14,116,144,0.3); padding:0.25rem 0.5rem; border-radius:0.5rem">Suffering √ó 10</span>
                        </div>
                        
                        <div style="background:rgba(255,255,255,0.1); padding:1.25rem; border-radius:1rem; margin:1.5rem 0">
                            <p style="color:white; font-weight:600; margin-bottom:0.5rem">Example:</p>
                            <p style="color:rgba(255,255,255,0.9); font-size:1rem; line-height:1.6">
                                Friend is 15 minutes late<br>
                                <span style="color:var(--text-teal)">Fact:</span> They're not here yet<br>
                                <span style="color:#fca5a5">Story:</span> "They don't respect me!"<br>
                                <span style="color:white; font-weight:600">Result:</span> 10√ó more suffering
                            </p>
                        </div>
                        
                        <div style="background:rgba(14,116,144,0.18); border:1px solid rgba(14,116,144,0.35); padding:0.5rem 1rem; border-radius:2rem; font-size:0.875rem; color:var(--text-teal); font-weight:500; display:inline-block">
                            You'll learn to skip the story
                        </div>
                    </div>
                    <button onclick="nextStep()" class="btn btn-primary">See How It Works ‚Üí</button>
                </div>
            `;
        }
        
        function renderStep2() {
            setTimeout(() => {
                const textarea = document.getElementById('dramaText');
                const charCounter = document.getElementById('charCounter');
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                
                if (textarea) {
                    textarea.addEventListener('input', (e) => {
                        const length = e.target.value.length;
                        userInput.dramaStory = e.target.value;
                        
                        if (charCounter) {
                            charCounter.textContent = `${length} characters${length < 20 ? ' (min 20)' : ''}`;
                            if (length >= 20) {
                                charCounter.classList.add('active');
                            } else {
                                charCounter.classList.remove('active');
                            }
                        }
                        updateButtonState();
                    });
                    
                    textarea.dispatchEvent(new Event('input'));
                }
                
                checkboxes.forEach(cb => {
                    const label = cb.closest('.checkbox-label');
                    const text = label.querySelector('span').textContent;
                    
                    if (userInput.dramaWords.includes(text)) {
                        cb.checked = true;
                        label.classList.add('checked');
                    }
                    
                    cb.addEventListener('change', (e) => {
                        if (e.target.checked) {
                            label.classList.add('checked');
                        } else {
                            label.classList.remove('checked');
                        }
                    });
                });
                
                updateButtonState();
            }, 100);
            
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    <div class="card" style="background:rgba(217,119,6,0.15); border:1px solid rgba(217,119,6,0.35)">
                        <div style="font-size:3rem; margin-bottom:0.75rem; text-align:center">üé¨</div>
                        <h2 style="font-size:1.5rem; font-weight:600; margin-bottom:1rem; text-align:center">Your Blockbuster Drama</h2>
                        <p style="color:var(--text-secondary); text-align:center; font-size:1rem">Make your problem into a movie. Really feel the drama.</p>
                    </div>
                    
                    <div class="card">
                        <p style="font-size:1.05rem; font-weight:600; margin-bottom:1.5rem">Director's Instructions:</p>
                        ${['Think of something mildly annoying',
                           'Now make it a blockbuster drama',
                           'Use words like "ALWAYS," "NEVER," "DISASTER"',
                           'Really feel how awful it is']
                           .map((item, i) => `
                            <div style="display:flex; gap:1rem; margin-bottom:1.5rem; align-items:start">
                                <div style="width:2.25rem; height:2.25rem; background:var(--gradient-main); border-radius:0.5rem; display:flex; align-items:center; justify-content:center; color:white; font-weight:700; flex-shrink:0">
                                    ${i + 1}
                                </div>
                                <p style="color:var(--text-secondary); padding-top:0.375rem; line-height:1.6; font-size:1rem">${item}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="card" style="border:2px solid rgba(220,38,38,0.4); background:rgba(220,38,38,0.05)">
                        <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:1rem">
                            <span style="font-size:1.5rem">üé≠</span>
                            <h3 style="color:#fca5a5; font-weight:600; font-size:1.125rem">Drama Script:</h3>
                        </div>
                        
                        <div class="checkbox-grid" style="margin-bottom:1.5rem">
                            ${['ALWAYS / NEVER', 'DISASTER / RUINED', 'TOTALLY / COMPLETELY', 'SHOULD HAVE / FAILED', 'IMPOSSIBLE / UNBEARABLE']
                            .map(item => `
                                <label class="checkbox-label">
                                    <input type="checkbox">
                                    <span style="color:var(--text-secondary); font-size:0.9375rem">${item}</span>
                                </label>
                            `).join('')}
                        </div>
                        
                        <p style="font-weight:600; margin-bottom:0.75rem; font-size:1rem">Write your dramatic version:</p>
                        <textarea id="dramaText" placeholder="Let the drama pour out... make it a blockbuster movie scene...">${userInput.dramaStory}</textarea>
                        <div id="charCounter" class="char-counter">0 characters (min 20)</div>
                    </div>
                    
                    <button onclick="nextStep()" class="btn btn-primary">See The Two Versions ‚Üí</button>
                </div>
            `;
        }
        
        function renderStep3() {
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    
                    <div class="card" style="text-align:center; padding:1.5rem; margin-bottom:1rem">
                        <div style="font-size:3rem; margin-bottom:1rem">üéûÔ∏è</div>
                        <h2 style="font-size:1.5rem; font-weight:600; margin-bottom:0.5rem">Soap Opera vs News Report</h2>
                        <p style="color:var(--text-secondary)">Your brain makes soap operas. Life is just news reports.</p>
                    </div>
                    
                    <div class="card" style="border:2px solid rgba(220,38,38,0.45); background:rgba(220,38,38,0.08); margin-bottom:1rem">
                        <div style="display:flex; align-items:center; gap:0.75rem; margin-bottom:1rem">
                            <div style="font-size:2rem">üé≠</div>
                            <div>
                                <h3 style="color:#fca5a5; font-weight:600; font-size:1.25rem">SOAP OPERA VERSION</h3>
                                <p style="color:#fca5a5; font-size:0.875rem; font-weight:500">Drama, feelings, stories</p>
                            </div>
                        </div>
                        
                        <div style="background:rgba(220,38,38,0.1); padding:1rem; border-radius:0.75rem; margin-bottom:1rem">
                            <p style="color:#fca5a5; font-size:1.1rem; font-weight:600">"DESTROYED MY DAY!"</p>
                        </div>
                        <div style="background:rgba(220,38,38,0.1); padding:1rem; border-radius:0.75rem; margin-bottom:1rem">
                            <p style="color:#fca5a5; font-size:1.1rem; font-weight:600">"THEY HATE ME!"</p>
                        </div>
                        <div style="background:rgba(220,38,38,0.1); padding:1rem; border-radius:0.75rem">
                            <p style="color:#fca5a5; font-size:1.1rem; font-weight:600">"COMPLETE FAILURE!"</p>
                        </div>
                    </div>
                    
                    <div style="text-align:center; font-size:2rem; margin:1rem 0">‚¨áÔ∏è</div>
                    
                    <div class="card" style="border:2px solid rgba(14,116,144,0.45); background:rgba(14,116,144,0.08); margin-bottom:1rem">
                        <div style="display:flex; align-items:center; gap:0.75rem; margin-bottom:1rem">
                            <div style="font-size:2rem">üì∞</div>
                            <div>
                                <h3 style="color:var(--text-teal); font-weight:600; font-size:1.25rem">NEWS REPORT VERSION</h3>
                                <p style="color:var(--text-teal); font-size:0.875rem; font-weight:500">Facts, times, what happened</p>
                            </div>
                        </div>
                        
                        <div style="background:rgba(14,116,144,0.1); padding:1rem; border-radius:0.75rem; margin-bottom:1rem">
                            <p style="color:var(--text-teal); font-size:1.1rem; font-weight:600">"RAINED FOR 2 HOURS"</p>
                        </div>
                        <div style="background:rgba(14,116,144,0.1); padding:1rem; border-radius:0.75rem; margin-bottom:1rem">
                            <p style="color:var(--text-teal); font-size:1.1rem; font-weight:600">"NO REPLY YET"</p>
                        </div>
                        <div style="background:rgba(14,116,144,0.1); padding:1rem; border-radius:0.75rem">
                            <p style="color:var(--text-teal); font-size:1.1rem; font-weight:600">"SCORED 65%"</p>
                        </div>
                    </div>
                    
                    <button onclick="nextStep()" class="btn btn-primary">Learn News Reporter Rules ‚Üí</button>
                </div>
            `;
        }
        
        function renderStep4() {
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    
                    <div class="card skill-header" style="padding:1.75rem; margin-bottom:1rem">
                        <div style="font-size:3rem; margin-bottom:0.75rem; text-align:center">üìò</div>
                        <h2 style="color:white; font-size:1.5rem; font-weight:700; text-align:center; margin-bottom:0.5rem">The Reporter Handbook</h2>
                        <p style="color:rgba(255,255,255,0.9); text-align:center; font-size:1rem">5 rules for "just the facts"</p>
                    </div>
                    
                    ${[
                        {rule: '1', title: 'Just what happened', example: '"Website crashed at 2:30 PM"', note: 'Not "disaster"'},
                        {rule: '2', title: 'Times, numbers, facts', example: '"Missed 3 deadlines this month"', note: 'Not "failing"'},
                        {rule: '3', title: 'No "always/never"', example: '"They said \'no thanks\'"', note: 'Not "they hate me"'},
                        {rule: '4', title: 'No mind-reading', example: '"Meeting lasted 2 hours"', note: 'Not "unbearable"'},
                        {rule: '5', title: 'Does the feeling fit ONLY the facts?', example: 'Feeling: "Annoyed" ‚Üí ‚úÖ Fits', note: '(If not, story alert!)'}
                    ].map(item => `
                        <div class="card" style="border-left:4px solid ${item.rule === '5' ? 'var(--accent-amber)' : 'var(--primary-teal)'}; background:${item.rule === '5' ? 'rgba(217,119,6,0.08)' : 'rgba(14,116,144,0.08)'}">
                            <div style="display:flex; align-items:start; gap:1rem; margin-bottom:0.75rem">
                                <div style="background:${item.rule === '5' ? 'rgba(217,119,6,0.2)' : 'rgba(14,116,144,0.2)'}; color:${item.rule === '5' ? 'var(--text-amber)' : 'var(--text-teal)'}; width:2rem; height:2rem; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; flex-shrink:0">${item.rule}</div>
                                <div>
                                    <h3 style="color:${item.rule === '5' ? 'var(--text-amber)' : 'var(--text-teal)'}; font-weight:600; font-size:1.125rem; margin-bottom:0.25rem">${item.title}</h3>
                                    <p style="color:var(--text-secondary); font-size:0.9375rem">${item.note}</p>
                                </div>
                            </div>
                            <div style="background:${item.rule === '5' ? 'rgba(217,119,6,0.1)' : 'rgba(14,116,144,0.1)'}; padding:0.75rem; border-radius:0.5rem; margin-top:0.5rem">
                                <p style="color:${item.rule === '5' ? 'var(--text-amber)' : 'var(--text-teal)'}; font-weight:500; font-size:0.9375rem">${item.example}</p>
                            </div>
                        </div>
                    `).join('')}
                    
                    <button onclick="nextStep()" class="btn btn-primary">Now Write Your News Report ‚Üí</button>
                </div>
            `;
        }
        
        function renderStep5() {
            setTimeout(() => {
                const factsText = document.getElementById('factsText');
                const factsCounter = document.getElementById('factsCounter');
                const reliefRating = document.getElementById('reliefRating');
                const differenceWord = document.getElementById('differenceWord');
                
                if (factsText) {
                    factsText.addEventListener('input', (e) => {
                        const length = e.target.value.length;
                        userInput.factStory = e.target.value;
                        
                        if (factsCounter) {
                            factsCounter.textContent = `${length} characters${length < 10 ? ' (min 10)' : ''}`;
                            if (length >= 10) {
                                factsCounter.classList.add('active');
                            } else {
                                factsCounter.classList.remove('active');
                            }
                        }
                        updateButtonState();
                    });
                    
                    factsText.dispatchEvent(new Event('input'));
                }
                
                if (reliefRating) {
                    reliefRating.value = userInput.relief;
                    updateReliefValue();
                }
                
                if (differenceWord) {
                    differenceWord.value = userInput.diffWord;
                }
                
                updateButtonState();
            }, 100);
            
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    <div class="card skill-header" style="padding:1.75rem; margin-bottom:1rem">
                        <div style="font-size:3rem; margin-bottom:0.75rem; text-align:center">‚úçÔ∏è</div>
                        <h2 style="color:white; font-size:1.5rem; font-weight:700; text-align:center; margin-bottom:0.5rem">Write Your News Report</h2>
                        <p style="color:rgba(255,255,255,0.9); text-align:center; font-size:1rem">Take your drama. Report just the facts.</p>
                    </div>
                    
                    ${userInput.dramaStory ? `
                    <div class="card" style="border-left:4px solid var(--drama-red); background:rgba(220,38,38,0.08)">
                        <p style="font-weight:600; margin-bottom:0.75rem; font-size:1rem">üé≠ Your Drama Version:</p>
                        <p style="color:var(--text-secondary); font-style:italic; line-height:1.6; font-size:1rem">"${userInput.dramaStory}"</p>
                    </div>
                    
                    <div style="text-align:center; font-size:2rem; margin:1rem 0">‚¨áÔ∏è</div>
                    ` : ''}
                    
                    <div class="card" style="border-left:4px solid var(--primary-teal); background:rgba(14,116,144,0.08)">
                        <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:1rem">
                            <span style="font-size:1.5rem">üì∞</span>
                            <h3 style="color:var(--text-teal); font-weight:600; font-size:1.125rem">Be a News Reporter:</h3>
                        </div>
                        
                        <p style="font-size:1.05rem; margin-bottom:1rem">Your fact-based news report:</p>
                        <textarea id="factsText" placeholder="Just the facts... what actually happened? When? How long? What was said?...">${userInput.factStory}</textarea>
                        <div id="factsCounter" class="char-counter">0 characters (min 10)</div>
                    </div>
                    
                    <div class="card">
                        <p style="font-weight:600; margin-bottom:1.5rem; font-size:1.125rem; text-align:center">How much lighter does the facts version feel?</p>
                        <div style="margin-bottom:2rem">
                            <input type="range" min="1" max="10" value="${userInput.relief || 5}" id="reliefRating" style="width:100%; margin-bottom:1rem" oninput="updateReliefValue()">
                            <div style="display:flex; justify-content:space-between; align-items:center">
                                <span style="color:var(--text-muted); font-size:0.875rem">Same weight</span>
                                <div id="reliefDisplay" style="background:rgba(14,116,144,0.2); padding:0.5rem 1.25rem; border-radius:0.75rem; min-width:3rem; text-align:center">
                                    <span id="reliefVal" style="color:var(--text-teal); font-weight:700; font-size:1.5rem">${userInput.relief || 5}</span>
                                    <div id="reliefEmoji" class="relief-emoji">${getReliefEmoji(userInput.relief || 5)}</div>
                                </div>
                                <span style="color:var(--text-muted); font-size:0.875rem">Much lighter</span>
                            </div>
                        </div>
                        <p style="font-weight:600; margin-bottom:1rem; font-size:1rem">One word for how this feels:</p>
                        <input type="text" id="differenceWord" placeholder="e.g., freeing, clearer, lighter..." value="${userInput.diffWord}" style="width:100%; padding:0.75rem; border-radius:0.75rem; border:1px solid rgba(51,65,85,0.4); background:rgba(30,41,59,0.5); color:white; font-size:1rem">
                    </div>
                    
                    <button onclick="nextStep()" class="btn btn-primary" style="margin-top:1rem">Continue ‚Üí</button>
                </div>
            `;
        }
        
        function updateReliefValue() {
            const value = document.getElementById('reliefRating').value;
            userInput.relief = value;
            document.getElementById('reliefVal').textContent = value;
            document.getElementById('reliefEmoji').textContent = getReliefEmoji(value);
            
            const reliefDisplay = document.getElementById('reliefDisplay');
            if (value < 4) {
                reliefDisplay.style.background = 'rgba(239,68,68,0.2)';
            } else if (value < 7) {
                reliefDisplay.style.background = 'rgba(217,119,6,0.2)';
            } else {
                reliefDisplay.style.background = 'rgba(14,116,144,0.2)';
            }
        }
        
        function getReliefEmoji(value) {
            const emojis = ['üò´', 'üò£', 'üòï', 'üòê', 'üôÇ', 'üòå', 'üòä', 'üòÅ', '‚ú®', 'üåü'];
            return emojis[Math.min(Math.max(0, value - 1), 9)];
        }
        
        function renderStep6() {
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    
                    <div class="card" style="text-align:center; padding:1.5rem; margin-bottom:1rem">
                        <div style="font-size:3rem; margin-bottom:1rem">üîç</div>
                        <h2 style="font-size:1.5rem; font-weight:600; margin-bottom:0.5rem">Drama Detector</h2>
                        <p style="color:var(--text-secondary)">Spot drama. Report facts. That's the skill.</p>
                    </div>
                    
                    <div class="card">
                        <h3 style="font-weight:600; margin-bottom:1.5rem; font-size:1.125rem">Daily Practice:</h3>
                        
                        <div style="margin-bottom:1.5rem">
                            <p style="font-weight:600; margin-bottom:0.75rem; font-size:1rem">üéØ What to look for:</p>
                            ${['ALWAYS / NEVER (patterns)',
                               'DISASTER / RUINED (evaluations)',
                               'SHOULD / SHOULDN\'T (judgments)',
                               'HATE / LOVE (about situations)',
                               'UNBEARABLE / IMPOSSIBLE (catastrophizing)']
                               .map(item => `
                                <div style="display:flex; align-items:center; gap:0.75rem; padding:0.75rem; margin-bottom:0.5rem; background:rgba(220,38,38,0.1); border-radius:0.75rem">
                                    <span style="color:#fca5a5; font-size:1.25rem">‚ùå</span>
                                    <span style="color:var(--text-secondary)">${item}</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div>
                            <p style="font-weight:600; margin-bottom:0.75rem; font-size:1rem">‚úÖ What to replace with:</p>
                            ${['This time / Once (specific)',
                               'Problem to fix (neutral)',
                               'What happened (facts)',
                               'Preference / Choice (neutral)',
                               'Challenge / Situation (neutral)']
                               .map(item => `
                                <div style="display:flex; align-items:center; gap:0.75rem; padding:0.75rem; margin-bottom:0.5rem; background:rgba(14,116,144,0.1); border-radius:0.75rem">
                                    <span style="color:var(--text-teal); font-size:1.25rem">‚úÖ</span>
                                    <span style="color:var(--text-secondary)">${item}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="card" style="background:rgba(14,116,144,0.1); border:1px solid rgba(14,116,144,0.3)">
                        <h3 style="color:var(--text-teal); font-weight:600; margin-bottom:1rem; font-size:1.05rem">‚ú® Your Power Move:</h3>
                        <div style="color:var(--text-secondary); line-height:1.7; font-size:1rem">
                            <p style="margin-bottom:1rem">When you feel heavy emotion:</p>
                            <div style="background:rgba(14,116,144,0.15); padding:1rem; border-radius:0.75rem; margin:1rem 0">
                                <p style="color:var(--text-teal); font-weight:600; text-align:center; font-size:1.125rem">"Just give me the news report."</p>
                            </div>
                            <p>That's it. That's the skill.</p>
                        </div>
                    </div>
                    
                    <button onclick="nextStep()" class="btn btn-primary" style="margin-top:1rem">Get Your Press Pass ‚Üí</button>
                </div>
            `;
        }
        
        function renderStep7() {
            setTimeout(() => {
                confetti({ 
                    particleCount: 100, 
                    spread: 70, 
                    origin: { y: 0.6 }
                });
            }, 500);
            
            const defaultDrama = userInput.dramaStory || "No dramatic story was entered";
            const defaultFacts = userInput.factStory || "No factual rewrite was entered";
            const defaultWord = userInput.diffWord || "Clearer";
            
            return `
                <div class="step-transition">
                    ${renderHeader()}
                    
                    <div class="card skill-header" style="padding:1.5rem; text-align:center; margin-bottom:1rem">
                        <div style="font-size:3.5rem; margin-bottom:0.75rem">üèÜ</div>
                        <h2 style="color:white; font-size:1.75rem; font-weight:700; margin-bottom:0.5rem">OFFICIAL NEWS REPORTER</h2>
                        <p style="color:rgba(255,255,255,0.9); font-size:0.9375rem">CERTIFIED: Just The Facts</p>
                    </div>

                    ${userInput.dramaStory && userInput.factStory ? `
                    <div class="card">
                        <h3 style="font-weight:600; margin-bottom:1.5rem; font-size:1.25rem; text-align:center">Your Transformation:</h3>
                        
                        <div style="margin-bottom:1.5rem; padding:1.25rem; background:rgba(220,38,38,0.08); border-radius:0.875rem; border-left:3px solid var(--drama-red)">
                            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.75rem">
                                <span style="font-size:1.5rem">üé≠</span>
                                <p style="font-size:0.875rem; color:#fca5a5; font-weight:600">Before (Soap Opera)</p>
                            </div>
                            <p style="color:var(--text-secondary); font-style:italic; line-height:1.6">"${defaultDrama.slice(0, 200)}${defaultDrama.length > 200 ? '...' : ''}"</p>
                        </div>

                        <div style="text-align:center; font-size:1.5rem; margin:1rem 0">‚¨áÔ∏è</div>
                        
                        <div style="margin-bottom:1.5rem; padding:1.25rem; background:rgba(14,116,144,0.08); border-radius:0.875rem; border-left:3px solid var(--primary-teal)">
                            <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.75rem">
                                <span style="font-size:1.5rem">üì∞</span>
                                <p style="font-size:0.875rem; color:var(--text-teal); font-weight:600">After (News Report)</p>
                            </div>
                            <p style="color:var(--text-teal); font-weight:500; line-height:1.6">"${defaultFacts.slice(0, 200)}${defaultFacts.length > 200 ? '...' : ''}"</p>
                        </div>

                        <div style="background:linear-gradient(135deg, rgba(14,116,144,0.1), rgba(217,119,6,0.1)); padding:1.5rem; border-radius:0.875rem; border:1px solid rgba(14,116,144,0.2); text-align:center">
                            <p style="color:var(--text-secondary); font-size:0.9375rem; margin-bottom:0.75rem">You described this shift as:</p>
                            <h3 style="color:white; font-size:1.75rem; margin:0.75rem 0; font-weight:700">"${defaultWord}"</h3>
                            <div style="display:flex; justify-content:center; align-items:center; gap:0.75rem; margin-top:1rem">
                                <span style="font-size:0.875rem; color:var(--text-muted)">Relief Level:</span>
                                <span style="background:rgba(14,116,144,0.25); color:var(--text-teal); padding:0.375rem 1rem; border-radius:2rem; font-weight:700; font-size:1.125rem">${userInput.relief}/10</span>
                                <span style="font-size:1.5rem">${getReliefEmoji(userInput.relief)}</span>
                            </div>
                        </div>
                    </div>
                    ` : ''}

                    <div class="card">
                        <h3 style="font-weight:600; font-size:1.125rem; margin-bottom:1.25rem; text-align:center">Save Your Progress</h3>
                        <div style="display:grid; gap:0.75rem">
                            <button onclick="downloadProgress()" class="btn btn-primary" style="display:flex; align-items:center; justify-content:center; gap:0.75rem; padding:1.25rem">
                                <span style="font-size:1.5rem">üíæ</span>
                                <span>Download My Transformation</span>
                            </button>
                            <button onclick="returnToCourse()" style="width:100%; padding:1.25rem; border-radius:1rem; background:transparent; border:2px solid rgba(148,163,184,0.4); color:var(--text-muted); font-weight:600; font-size:1rem; display:flex; align-items:center; justify-content:center; gap:0.75rem; cursor:pointer">
                                <span style="font-size:1.5rem">‚Üê</span>
                                <span>Return to Course</span>
                            </button>
                        </div>
                    </div>
                    
                    <div style="background:rgba(34,197,94,0.12); border:1px solid rgba(34,197,94,0.35); padding:1rem; margin-top:0.5rem; text-align:center; border-radius:0.75rem">
                        <p style="color:var(--success-emerald); font-size:0.875rem; font-weight:500">üå± You've mastered: See facts. Skip drama. Just give me the news report.</p>
                    </div>
                </div>
            `;
        }
        
        function downloadProgress() {
            const content = `JUST THE FACTS - MY TRANSFORMATION
${new Date().toLocaleDateString()}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üé≠ BEFORE (Soap Opera):
"${userInput.dramaStory || 'No drama story entered'}"

üì∞ AFTER (News Report):
"${userInput.factStory || 'No facts version entered'}"

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Relief Rating: ${userInput.relief}/10
One Word: "${userInput.diffWord || 'N/A'}"

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

THE REPORTER HANDBOOK:

1. Just what happened
   - Not the story, just the event
   - Example: "Website crashed at 2:30 PM" (Not "disaster")

2. Times, numbers, facts
   - Measurable data only
   - Example: "Missed 3 deadlines this month" (Not "failing")

3. No "always/never"
   - Stick to this time
   - Example: "They said 'no thanks'" (Not "they hate me")

4. No mind-reading
   - Only what was said/done
   - Example: "Meeting lasted 2 hours" (Not "unbearable")

5. Does the feeling fit ONLY the facts?
   - If not, story alert!
   - Example: Friend is 15 min late
     ‚Ä¢ Feeling "They hate me!" ‚Üí üö® STORY ALERT!
     ‚Ä¢ Feeling "Annoyed" ‚Üí ‚úÖ Fits the facts

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

KEY INSIGHTS:
‚úì Your brain adds stories to facts
‚úì Stories multiply suffering by 10x
‚úì Facts keep you grounded
‚úì "Just the facts" is your new filter
‚úì Not "feel better" ‚Äî see clearer

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

REFLECTION PROMPTS:

1. What drama pattern did you notice in your thinking?
2. How did it feel to rewrite drama as just facts?
3. Which situation this week needs "just the news report"?`;
   
            try {
                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Just-The-Facts-${new Date().toISOString().split('T')[0]}.txt`;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                showFeedback('‚úì Downloaded! Check your downloads folder.', 3000);
                
                setTimeout(() => {
                    confetti({ particleCount: 60, spread: 50, origin: { y: 0.7 } });
                }, 300);
                
                const downloadBtn = document.querySelector('button[onclick="downloadProgress()"]');
                if (downloadBtn) {
                    const originalHTML = downloadBtn.innerHTML;
                    downloadBtn.innerHTML = '<span style="font-size:1.5rem">‚úì</span> <span>Downloaded!</span>';
                    downloadBtn.style.background = 'var(--success-emerald)';
                    downloadBtn.disabled = true;
                    
                    setTimeout(() => {
                        downloadBtn.innerHTML = originalHTML;
                        downloadBtn.style.background = 'var(--gradient-main)';
                        downloadBtn.disabled = false;
                    }, 2500);
                }
                
                localStorage.setItem('moduleCompleted', JSON.stringify({
                    moduleId: 'just-the-facts',
                    completed: true,
                    timestamp: new Date().toISOString()
                }));
            } catch (error) {
                console.error('Download failed:', error);
                showFeedback('Download failed. Please try again.', 3000);
            }
        }
        
        function returnToCourse() {
            localStorage.removeItem('factsModuleProgress');
            window.location.href = 'course-mindfulness.html';
        }
        
        function render() {
            const content = document.getElementById('content');
            let html = '';
            
            switch(step) {
                case 1: html = renderStep1(); break;
                case 2: html = renderStep2(); break;
                case 3: html = renderStep3(); break;
                case 4: html = renderStep4(); break;
                case 5: html = renderStep5(); break;
                case 6: html = renderStep6(); break;
                case 7: html = renderStep7(); break;
                default: html = renderStep1();
            }
            
            content.innerHTML = html;
            
            setTimeout(() => {
                document.querySelector('.main-content').scrollTop = 0;
            }, 50);
        }
        
        // Initial load
        window.addEventListener('load', () => {
            loadProgress();
            render();
        });
    </script>
</body>
</html>
